(((title . "Reference Manual of the XML-in-LAML library") (author (ast "span" ("Kurt Nørmark" #t " " #t (char-ref copy)) () double xhtml10-transitional ()) #t "normark@cs.aau.dk") (affiliation "Department of Computer Science," #t "Aalborg University," #t "Denmark.") (abstract . " The XML-in-LAML common parts, which are shared between all XML-in-LAML languages. The library is used together with <a href=\"../mirrors/man/xhtml10-transitional-mirror.html\">XHTML 1.0 transitional</a>, <a href=\"../mirrors/man/xhtml10-strict-mirror.html\">XHTML 1.0 strict</a>, <a href=\"../mirrors/man/xhtml10-frameset-mirror.html\">XHTML 1.0 frameset</a>, <a href=\"../mirrors/man/xhtml11-mirror.html\">XHTML1.1</a>,  <a href=\"../mirrors/man/svg11-mirror.html\">SVG 1.1</a>,  <a href=\"../../../styles/xml-in-laml/lecture-notes/man/lecture-notes.html\">LENO</a>,  and other similar mirrors.<p> This library loads <a href=\"../../man/final-state-automaton.html\">the the LAML finite state automation library</a> for the sake of full document validation at document generation time.<p> <a href=\"../../../tools/xml-in-laml/man/xml-in-laml.html\">The XML-in-LAML Mirror Generation tool</a> is able to create a set of Scheme mirror functions for a given XML DTD. The generated mirror functions together with the shared XML-in-LAML common library (this file) make up the effective mirror of an XML language.<p> This library is also designed to co-exists with non-validating HTML mirrors, such as <a href=\"../../html4.0-loose/man/surface.html\"> Html4.0</a> (mainly the sake of LENO). However, it <b>cannot</b> be used together with other validating AST-based HTML mirrors, such as  <a href=\"../../html4.01-transitional-validating/man/surface.html\"> Html4.01 transitional validating</a>. You should use a 100% XML-IN-LAML solution instead. By that we mean a solution, where also the HTML stuff is based on XML-in-LAML. In practical terms, it means that you should use one of the XHTML mirrors mentioned above.<p> ") (scheme-source-file . "/user/normark/scheme/lib/xml-in-laml/xml-in-laml.scm/") (laml-resource . "true") (documentation-commenting-style . not-provided) (default-attribute-explanation . not-provided) (source-destination-delta . not-provided) (css-prestylesheet . "compact") (css-stylesheet . "argentina") (css-stylesheet-copying . "true") (make-dtd-manual-template . not-provided) (keep-syntactical-comment-file . not-provided) (manual-destination-name . not-provided) (mirror-names-defined . not-provided) (mirror-name-prefix . not-provided) (attribute-sorting . not-provided) (scheme-source-linking . "true")) ((kind "manual-section") (section-title "XML front matters and end matters stuff.") (section-body "This section contains the XML declaration and other XML front matter stuff. In addition it holds the end-laml function. ") (section-id "front-matters")) ((kind "manual-page") (description "The standard-prolog function as redefined for XML. It returns the xml-declaration, the document type declaration, and a copyright comment. The standard prolog is the document part before the document root element. A default version of the standard-prolog is found in laml.scm. The present function relies on another function, xml-document-type-declaration-in, which returns an appropriate document type declaration ") (form "(standard-prolog [language])") (title "standard-prolog") (cross-references (reference "Scheme source file" "standard-prolog" "xml-in-laml-ep/xml-in-laml-1.html#standard-prolog") (internal-references "applied function" "xml-declaration") (internal-references "applied function" "xml-document-type-declaration-in") (reference "applied function" "copyright-clause" "../../../man/laml.html#copyright-clause")) (examples)) ((cross-references (reference "Scheme source file" "laml-xml-version" "xml-in-laml-ep/xml-in-laml-1.html#laml-xml-version")) (kind "manual-page") (description "The version of XML used together with LAML. A string. ") (title "laml-xml-version") (form laml-xml-version) (examples)) ((cross-references (reference "Scheme source file" "laml-character-encoding" "xml-in-laml-ep/xml-in-laml-1.html#laml-character-encoding")) (kind "manual-page") (description "The character encoding used together with XML in LAML. Goes into the xml declaration. A string. ") (title "laml-character-encoding") (form laml-character-encoding) (examples)) ((cross-references (reference "Scheme source file" "xml-declaration" "xml-in-laml-ep/xml-in-laml-1.html#xml-declaration")) (kind "manual-page") (description "Return the xml declaration ") (title "xml-declaration") (form (xml-declaration)) (examples)) ((kind "manual-page") (description "A redefinition of end-laml from the fundamental LAML library. This redefined function calls the function check-id-and-idref-attributes!, which reports on possible violations of ID and IDREF(S) attribute constraints. It also checks relative and absolute links, if desired. Calls the original end-laml function as the last action. ") (title "end-laml") (form (end-laml)) (cross-references (reference "Scheme source file" "end-laml" "xml-in-laml-ep/xml-in-laml-1.html#end-laml") (reference "original end-laml" "laml.scm" "../../../man/laml.html#end-laml") (internal-references "ID and IDREF check function" "check-id-and-idref-attributes!") (internal-references "Control of link checking" "xml-link-checking")) (examples)) ((kind "manual-section") (section-title "XML-in-LAML processing parameters.") (section-body "The variables and functions in this part control a number of general properties of XML-in-LAML processing. Some of these are generic for all XML-in-LAML languages; Others are specific to a single language. A number of the properties are related to the checking, validation, and error reporting of the XML mirror functions. ") (section-id "processing-par")) ((cross-references (reference "Scheme source file" "laml-internal-representation" "xml-in-laml-ep/xml-in-laml-1.html#laml-internal-representation")) (kind "manual-page") (description "A variable that determines the internal representation used for XML-in-LAML. Possible values: laml and sxml. The value laml implies usage of the original LAML ASTs. The value sxml implies usage of the SXML list representation of XML. Use of the value sxml is still somewhat experimental. If the value of this variable is changed, the xml-in-laml library must be reloaded. ") (title "laml-internal-representation") (form laml-internal-representation) (examples)) ((cross-references (reference "Scheme source file" "xml-check-attributes?" "xml-in-laml-ep/xml-in-laml-1.html#xml-check-attributes?")) (kind "manual-page") (description "A boolean variable which controls the checking of element attributes. If true, check the element attributes against the attributes as defined in the DTD file. This variable is generic and common for all XML-in-LAML languages. The default value is true. ") (title "xml-check-attributes?") (form xml-check-attributes?) (examples)) ((cross-references (reference "Scheme source file" "xml-validate-contents?" "xml-in-laml-ep/xml-in-laml-1.html#xml-validate-contents?")) (kind "manual-page") (description "A boolean variable that controls the XML validation. If true, do validate the generated XML document against the DTD. This variable is generic and common for all XML-in-LAML languages. The default value is true. ") (title "xml-validate-contents?") (form xml-validate-contents?) (examples)) ((kind "manual-page") (description "Defines the amount of link checing that is to be carried out by LAML. Possible values are none, relative-urls, absolute-urls, and all (symbols), none: No link checking is done at alle. relative-urls: Only relative urls are checked. absolute-urls: Only absolute urls are checked. This includes URLs that are formed relative to a given base-url. all: All URLs, both absolute and relative, are checked. The default value is relative-urls. The use of the value all requires that url-target-exists? target is implemented. In the current version of LAML, url-target-exists? is only implemented when LAML is used with MzScheme (via the lib/url-read.scm). ") (title "xml-link-checking") (form xml-link-checking) (cross-references (reference "Scheme source file" "xml-link-checking" "xml-in-laml-ep/xml-in-laml-1.html#xml-link-checking") (internal-references "link checking functions" "collect-links-for-later-checking-in-ast!" "check-relative-url-list!" "check-absolute-url-list!") (reference "About link checking in LAML" "Note" "../../../info/link-checking.html")) (examples)) ((cross-references (reference "Scheme source file" "xml-check-language-overlap?" "xml-in-laml-ep/xml-in-laml-1.html#xml-check-language-overlap?")) (kind "manual-page") (description "A boolean variable that controls the check of XML language overlap. If true, check that no elements are used via ambiguous simple names. Quite naturally, this variable is generic and common for XML-in-LAML loaded at the same time. ") (title "xml-check-language-overlap?") (form xml-check-language-overlap?) (examples)) ((kind "manual-page") (description "Return if CDATA (Character data) is transformed through an HTML/XML character transformation table. The value is boolean, and normally true. ") (title "xml-transliterate-character-data-in?") (form (xml-transliterate-character-data-in? language)) (cross-references (reference "Scheme source file" "xml-transliterate-character-data-in?" "xml-in-laml-ep/xml-in-laml-1.html#xml-transliterate-character-data-in?") (internal-references "mutator" "set-xml-transliterate-character-data-in") (reference "transformation table" "laml.scm" "../../../man/laml.html#html-char-transformation-table")) (examples)) ((kind "manual-page") (parameters (parameter "language" "The name of the XML-in-LAML language - see the first few lines of relevant mirror library manuals - a symbol.") (parameter "new-value" "A boolean value.")) (description "Ask for transliteration of all CDATA characters via an HTML/XML character transformation table. new-value must be boolean. ") (comment "Consider macro implementation.") (title "set-xml-transliterate-character-data-in") (form (set-xml-transliterate-character-data-in language new-value)) (cross-references (reference "Scheme source file" "set-xml-transliterate-character-data-in" "xml-in-laml-ep/xml-in-laml-1.html#set-xml-transliterate-character-data-in") (internal-references "selector" "xml-transliterate-character-data-in?") (internal-references "table getter" "xml-char-transformation-table-in") (internal-references "table setter" "set-xml-char-transformation-table-in") (internal-references "exceptions" "xml-non-transliteration-elements-in") (reference "transformation table" "laml.scm" "../../../man/laml.html#html-char-transformation-table")) (examples)) ((kind "manual-page") (description "Return the HTML/XML character transformation table used for language. ") (returns "A character transformation table.") (title "xml-char-transformation-table-in") (form (xml-char-transformation-table-in language)) (cross-references (reference "Scheme source file" "xml-char-transformation-table-in" "xml-in-laml-ep/xml-in-laml-1.html#xml-char-transformation-table-in") (reference "transformation table" "laml.scm" "../../../man/laml.html#html-char-transformation-table") (internal-references "table setter" "set-xml-char-transformation-table-in") (internal-references "exceptions" "xml-non-transliteration-elements-in")) (examples)) ((kind "manual-page") (parameters (parameter "language" "The name of the XML-in-LAML language - see the first few lines of relevant mirror library manuals - a symbol.") (parameter "new-value" "A character transformation table.")) (description "Set the HTML/XML character transformation table used for language. The value must be a character transformation table. ") (comment "Consider macro implementation.") (title "set-xml-char-transformation-table-in") (form (set-xml-char-transformation-table-in language new-value)) (cross-references (reference "Scheme source file" "set-xml-char-transformation-table-in" "xml-in-laml-ep/xml-in-laml-1.html#set-xml-char-transformation-table-in") (internal-references "table getter" "xml-char-transformation-table-in") (internal-references "exceptions" "xml-non-transliteration-elements-in") (reference "transformation table" "laml.scm" "../../../man/laml.html#html-char-transformation-table")) (examples)) ((kind "manual-page") (description "Return the list of element names, for which we do not carry out the character transliteration in language. In XHTML, the list typically include the elements style and script. The value is a list of strings. The value of this function is locked and bound at mirror generation time. ") (title "xml-non-transliteration-elements-in") (form (xml-non-transliteration-elements-in language)) (cross-references (reference "Scheme source file" "xml-non-transliteration-elements-in" "xml-in-laml-ep/xml-in-laml-1.html#xml-non-transliteration-elements-in") (internal-references "transliteration" "xml-transliterate-character-data-in?")) (examples)) ((cross-references (reference "Scheme source file" "xml-preformatted-text-elements-in" "xml-in-laml-ep/xml-in-laml-1.html#xml-preformatted-text-elements-in")) (kind "manual-page") (description "Return the list of element names, for which we consistenly render all white space content characters as given in the input. In XHTML, the list typically include the pre element. The value is a list of strings. The value of this function is locked and bound at mirror generation time. ") (title "xml-preformatted-text-elements-in") (form (xml-preformatted-text-elements-in language)) (examples)) ((cross-references (reference "Scheme source file" "xml-error-truncation-length" "xml-in-laml-ep/xml-in-laml-1.html#xml-error-truncation-length")) (kind "manual-page") (description "How many characters of the validation error messages to be presented. If you want longer error messages, just increase the value of this variable. The default value is currently 130. ") (title "xml-error-truncation-length") (form xml-error-truncation-length) (examples)) ((kind "manual-page") (description "Controls whether the default attribute values, as specified in the DTD, are passed explicitly as attribute values in every instance of the element. The value is boolean, and normally false. A true value in most cases give problems relative to the XML attribute validation. The value of this function is locked and bound at mirror generation time. ") (title "xml-pass-default-dtd-attributes-in?") (form (xml-pass-default-dtd-attributes-in? language)) (cross-references (reference "Scheme source file" "xml-pass-default-dtd-attributes-in?" "xml-in-laml-ep/xml-in-laml-1.html#xml-pass-default-dtd-attributes-in?") (internal-references "validation control" "xml-check-attributes?")) (examples)) ((kind "manual-page") (parameters (parameter "language" "The name of an XML language (a symbol)")) (description "A boolean variable that controls how rigid LAML handles attribute values in language (first parameter). If this function returns #t, only strings are allowed as attribute values. If it returns #f, LAML will attempt to convert the attribute value to a string using the function as-string. (Certain lists, which internally represents ASTs etc) are not converted, however). If no language information is present (i.e., if the language parameter is #f) always return #t. ") (misc "The default value returned by this function is defined as a parameter of the mirror generation script.") (title "xml-accept-only-string-valued-attributes-in?") (form (xml-accept-only-string-valued-attributes-in? language)) (cross-references (reference "Scheme source file" "xml-accept-only-string-valued-attributes-in?" "xml-in-laml-ep/xml-in-laml-1.html#xml-accept-only-string-valued-attributes-in?") (internal-references "setter" "set-xml-accept-only-string-valued-attributes-in")) (examples)) ((kind "manual-page") (parameters (parameter "language" "The name of the XML-in-LAML language - see the first few lines of relevant mirror library manuals - a symbol.") (parameter "new-value" "A boolean value.")) (description "Controls the handling of LAML attribute values in language. If new-value is true, LAML only accept string valued XML attribute. If new-value is false, LAML string converts whatever follows an attribute symbol. The value must be a boolean value. True is recommended. ") (comment "Consider macro implementation.") (misc "Overwrites the default value, as defined by mirror generation script.") (title "set-xml-accept-only-string-valued-attributes-in") (form (set-xml-accept-only-string-valued-attributes-in language new-value)) (cross-references (reference "Scheme source file" "set-xml-accept-only-string-valued-attributes-in" "xml-in-laml-ep/xml-in-laml-1.html#set-xml-accept-only-string-valued-attributes-in") (internal-references "getter" "xml-accept-only-string-valued-attributes-in?")) (examples)) ((kind "manual-page") (parameters (parameter "language" "The name of an XML language (a symbol)")) (description "A boolean variable that controls how rigid LAML handles element contents items. If the value returned is #t, numbers and characters are accepted as element content items in addition to strings, ASTs, and character references. If no language information is present (i.e., if the language parameter is #f) always return #f. ") (misc "The default value returned by this function is defined as a parameter of the mirror generation script.") (title "xml-accept-extended-contents-in?") (form (xml-accept-extended-contents-in? language)) (cross-references (reference "Scheme source file" "xml-accept-extended-contents-in?" "xml-in-laml-ep/xml-in-laml-1.html#xml-accept-extended-contents-in?") (internal-references "setter" "set-xml-accept-extended-contents-in")) (examples)) ((kind "manual-page") (parameters (parameter "language" "The name of the XML-in-LAML language - see the first few lines of relevant mirror library manuals - a symbol.") (parameter "new-value" "A boolean value.")) (description "Controls the handling of LAML element contents items in language. If new-value is true, LAML accepts characters and numbers of contents items in addition to strings, ASTs and character references. If new-value is false, LAML only accept strings, ASTs, and character references as element contents items. The value must be a boolean value. ") (misc "Overwrites the default value, as defined by mirror generation script.") (title "set-xml-accept-extended-contents-in") (form (set-xml-accept-extended-contents-in language new-value)) (cross-references (reference "Scheme source file" "set-xml-accept-extended-contents-in" "xml-in-laml-ep/xml-in-laml-1.html#set-xml-accept-extended-contents-in") (internal-references "getter" "xml-accept-extended-contents-in?")) (examples)) ((cross-references (reference "Scheme source file" "xml-document-type-declaration-in" "xml-in-laml-ep/xml-in-laml-1.html#xml-document-type-declaration-in")) (kind "manual-page") (description "Return the document type declaration of language. The empty string signals that no document type declaration is available. The value of this function is locked and bound at mirror generation time. ") (title "xml-document-type-declaration-in") (form (xml-document-type-declaration-in language)) (examples)) ((cross-references (reference "Scheme source file" "xml-represent-white-space-in?" "xml-in-laml-ep/xml-in-laml-1.html#xml-represent-white-space-in?")) (kind "manual-page") (description "This value controls the representation of white space in the internal AST representation of a document. If true, white space markers are inserted. If false, a clean AST without any white space marking is produced. In some languages, white space handling is essential. This is the case in XHTML. In XML languages that are not related to presentation at all, white space handling is not relevant. The value of this function is locked and bound at mirror generation time. ") (title "xml-represent-white-space-in?") (form (xml-represent-white-space-in? language)) (examples)) ((cross-references (reference "Scheme source file" "xml-duplicated-attribute-handling" "xml-in-laml-ep/xml-in-laml-1.html#xml-duplicated-attribute-handling")) (kind "manual-page") (description "This value controls the handling of attributes that occur more than once in an XML attribute list. If the function returns keep-all, the attribute list is not affected at all; All attributes are passed to the application. If the function returns keep-first, only the first attribute name/value pair is passed for further processing, and only the first is passed on to the validation procedure. If the function returns keep-last, only the last attribute name/value pair is passed for further processing, and only the last is passed on to the validation procedure. The value of this function is locked and bound at mirror generation time. ") (returns "either keep-all, keep-first, keep-last (a symbol)") (title "xml-duplicated-attribute-handling") (form (xml-duplicated-attribute-handling language)) (examples)) ((cross-references (reference "Scheme source file" "set-xml-link-checking-functions" "xml-in-laml-ep/xml-in-laml-1.html#set-xml-link-checking-functions")) (kind "manual-page") (parameters (parameter "xml-language" "The name of the XML language (a symbol).") (parameter "url-extractor-function" "A URL extraction function (takes an AST parameter), or #f if no such function is provided.") (parameter "base-url-extractor-function" "A base URL extraction function (takes an AST parameter), or #f if no such function is provided.")) (description "Register url-extractor-function and base-url-extractor-function in the XML link checking map of xml-language. The XML link checking map maps an XML language name to a list of two functions: url-extractor-function base-url-extractor-function. The url-extractor-function can be applied on an XML AST in order to deliver a list of URLs that appear in that language. The base-url-extractor-function can also be applied on an XML AST. It delivers a possible base url (for use when resolving relative URLs) of the AST, of #f in no such base URL occurs. ") (title "set-xml-link-checking-functions") (form (set-xml-link-checking-functions xml-language url-extractor-function base-url-extractor-function)) (examples)) ((kind "manual-page") (description "Return the registered url-extractor function of xml-language. The url-extractor function can be applied on an XML-ast and it delivers a list of URLs that occur in the AST. ") (title "url-extractor-of-xml-language") (form (url-extractor-of-xml-language xml-language)) (cross-references (reference "Scheme source file" "url-extractor-of-xml-language" "xml-in-laml-ep/xml-in-laml-1.html#url-extractor-of-xml-language") (internal-references "applied by" "collect-links-for-later-checking-in-ast!") (reference "About link checking in LAML" "Note" "../../../info/link-checking.html")) (examples)) ((kind "manual-page") (description "Return the registered base-url-extractor function of xml-language. The base-url-extractor function can be applied on an XML-ast and it delivers a possible base url (for use when resolving relative URLs) in the AST. ") (title "base-url-extractor-of-xml-language") (form (base-url-extractor-of-xml-language xml-language)) (cross-references (reference "Scheme source file" "base-url-extractor-of-xml-language" "xml-in-laml-ep/xml-in-laml-1.html#base-url-extractor-of-xml-language") (internal-references "applied by" "collect-links-for-later-checking-in-ast!") (reference "About link checking in LAML" "Note" "../../../info/link-checking.html")) (examples)) ((kind "manual-section") (section-title "Other Constants.") (section-body "") (section-id "other-const")) ((cross-references (reference "Scheme source file" "explicit-space" "xml-in-laml-ep/xml-in-laml-1.html#explicit-space")) (kind "manual-page") (description "The explicit white space value, as used internally in ast. The default value is boolean #t. ") (title "explicit-space") (form explicit-space) (examples)) ((cross-references (reference "Scheme source file" "explicit-space-suppress" "xml-in-laml-ep/xml-in-laml-1.html#explicit-space-suppress")) (kind "manual-page") (description "The explicit white space suppress value. The default value is boolean #f. ") (title "explicit-space-suppress") (form explicit-space-suppress) (examples)) ((cross-references (reference "Scheme source file" "_" "xml-in-laml-ep/xml-in-laml-1.html#_")) (kind "manual-page") (description "The symbolic name of explicit white space suppress. ") (title "_") (form _) (examples (example "(ast-text (a 'href \"some-url\" 'target \"some-target\" \"anchor\" _ \"text\")) => \"anchortext\"") (example "(white-space-suppress? _) => #t") (example "(white-space-related? _) => #t") (example "(xml-sort-tag-parameters (list \"this\" _ \"is\" 'href \"url\" \"end\") \"a\" 'xhtml10-transitional) => ((\"this\" \"is\" #t \"end\") href \"url\")") (example "(xml-sort-superficially-tag-parameters (list \"this\" _ \"is\" 'href \"url\" \"end\") \"a\" 'xhtml10-transitional) => ((\"this\" #f \"is\" #t \"end\") href \"url\")"))) ((cross-references (reference "Scheme source file" "preferred-maximum-width" "xml-in-laml-ep/xml-in-laml-1.html#preferred-maximum-width")) (kind "manual-page") (description "An integer that expresses the prefered maximum column width for pretty printed ouput. ") (title "preferred-maximum-width") (form preferred-maximum-width) (examples)) ((cross-references (reference "Scheme source file" "indentation-delta" "xml-in-laml-ep/xml-in-laml-1.html#indentation-delta")) (kind "manual-page") (description "An integer which gives the level of indentation for pretty printed output. ") (title "indentation-delta") (form indentation-delta) (examples)) ((kind "manual-page") (description "Controls the rendering of white space in the textual contents. If #t, white space characters are rendered exactly as they are present in the textual content. If #f, white space is eliminated to the minimal amount when rendering. In normal use, always use #f. In situations where HTML formatting (especially PRE) is present as textual elements, it may be useful to use #t. In this context, notice the concept of preformatted text elements, as returned by the function xml-preformatted-text-elements-in. ") (title "xml-always-render-white-space?") (form xml-always-render-white-space?) (cross-references (reference "Scheme source file" "xml-always-render-white-space?" "xml-in-laml-ep/xml-in-laml-1.html#xml-always-render-white-space?") (internal-references "relevant function" "xml-preformatted-text-elements-in")) (examples)) ((kind "manual-section") (section-title "AST constructors and basic selector selectors.") (section-body "In this section we document the functions that work on abstract syntax trees (ASTs). More specifically, we describe the AST constructor function and the most basic functions that select a constituent of an AST. Abstract syntax trees make up the internal representation of XML documents in LAML. All XML mirror functions return abstract syntax trees, and as such they can be thought as convenient, high level AST constructors. Notice that the implementation of the functions in this section depend heavily on the value of the variable laml-internal-representation. ") (section-id "ast-cons-sel")) ((cross-references (reference "Scheme source file" "make-ast" "xml-in-laml-ep/xml-in-laml-1.html#make-ast")) (kind "manual-page") (parameters (parameter "element-name" "A symbol or a string.") (parameter "contents" "A list of contents in term of CDATA (strings), white space markers, or other ASTs.") (parameter "attributes" "The XML attributes represented as a property list.") (parameter "kind" "The symbol double or single. The kind single represents empty XML elements.") (parameter "language" "A symbol or string that represent the XML-in-LAML language name.") (parameter "internal-attributes" "A collection of internal attributes represented as a property list. Internal attributes can be used as arbitrary annotations of an XML document. Internal attributes do not affect the document rendering. Use internal attributes for AST annotations that cannot easily be made via use of XML attributes. ")) (description "Make an AST given element-name, contents, a property list of attributes, a kind (single/double), and an XML language name. The parameter contents may be a list of subtrees. It may also be an element which satisfies either ast?, cdata?, forced-white-space?, delayed-procedural-contents-element?, char-ref?, xml-comment?, cdata-section?, or processing-instruction? In these cases, we embed the single element into a list. attributes is the list of attributes on property list format (such as '(a1 \"v1\" a2 \"v2\")). attribute names are always symbols, and attribute values are normally strings. ") (form "(make-ast element-name contents attributes kind language [internal-attributes])") (title "make-ast") (examples)) ((cross-references (reference "Scheme source file" "ast-element-name" "xml-in-laml-ep/xml-in-laml-1.html#ast-element-name")) (kind "manual-page") (description "Return the root element name of ast. The type of the returned value is a string. ") (pre-condition "ast is an abstract syntax tree that satisfies the ast? predicate") (form "(ast-element-name ast)") (title "ast-element-name") (examples (example "(ast-element-name (html (head (title \"ttt\")) (body (p \"ppp\")))) => \"html\""))) ((kind "manual-page") (description "Return the list of substrees of ast. This is also known as the contents of the ast. It is a list of CDATA (strings), ASTs, and white space markers. ") (pre-condition "ast is an abstract syntax tree that satisfies the ast? predicate") (form "(ast-subtrees ast)") (title "ast-subtrees") (cross-references (reference "Scheme source file" "ast-subtrees" "xml-in-laml-ep/xml-in-laml-1.html#ast-subtrees") (internal-references "similar function" "ast-subtree")) (examples (example "(ast-subtrees (html (head (title \"ttt\")) (body (p \"ppp\")))) => ((ast \"head\" ((ast \"title\" (\"ttt\") () double xhtml10-transitional ())) () double xhtml10-transitional ()) #t (ast \"body\" ((ast \"p\" (\"ppp\") () double xhtml10-transitional ())) () double xhtml10-transitional ()))"))) ((kind "manual-page") (description "Return the list of attributes of the ast. ") (pre-condition "ast is an abstract syntax tree that satisfies the ast? predicate") (form "(ast-attributes ast)") (misc "The functions get-prop and defaulted-get-prop are useful for accessing the individual attribute values in the returned property list.") (returns "The list of attributes, as a property list.") (title "ast-attributes") (cross-references (reference "Scheme source file" "ast-attributes" "xml-in-laml-ep/xml-in-laml-1.html#ast-attributes") (reference "Relevant function" "get-prop" "../../man/general.html#get-prop") (reference "Relevant function" "defaulted-get-prop" "../../man/general.html#defaulted-get-prop") (internal-references "high-level selector" "ast-attribute") (internal-references "high-order selector" "attribute-getter")) (examples (example "(ast-attributes (html (head (title \"ttt\")) (body (p \"ppp\")))) => ()") (example "(ast-attributes (a 'href \"some-url\" 'target \"some-target\" \"anchor\")) => (href \"some-url\" target \"some-target\")"))) ((cross-references (reference "Scheme source file" "ast-kind" "xml-in-laml-ep/xml-in-laml-1.html#ast-kind")) (kind "manual-page") (description "Return the kind of the ast. The type of the returned value is a symbol, either single or double. ASTs of type single are also known as empty elements. Tells whether the ast is to be rendered as a single or double tag. ") (pre-condition "ast is an abstract syntax tree that satisfies the ast? predicate") (form "(ast-kind ast)") (title "ast-kind") (examples (example "(ast-kind (br)) => single") (example "(ast-kind (a 'href \"some-url\" 'target \"some-target\" \"anchor\")) => double"))) ((cross-references (reference "Scheme source file" "ast-language" "xml-in-laml-ep/xml-in-laml-1.html#ast-language")) (kind "manual-page") (description "Return the language of the ast. The type of the returned value is a symbol. ") (pre-condition "ast is an abstract syntax tree that satisfies the ast? predicate") (form "(ast-language ast)") (title "ast-language") (examples (example "(ast-language (html (head (title \"ttt\")) (body (p \"ppp\")))) => xhtml10-transitional"))) ((kind "manual-page") (description "Return the list of internal attributes of the ast. These are non XML attributes which can annotate the ast. ") (pre-condition "ast is an abstract syntax tree that satisfies the ast? predicate") (form "(ast-internal-attributes ast)") (returns "The list of internal attributes, as a property list.") (title "ast-internal-attributes") (cross-references (reference "Scheme source file" "ast-internal-attributes" "xml-in-laml-ep/xml-in-laml-1.html#ast-internal-attributes") (internal-references "internal attribute mutators" "ast-mutators") (internal-references "convenient accessors" "ast-internal-attribute" "has-internal-ast-attribute?")) (examples (example "(ast-internal-attributes (html (head (title \"ttt\")) (body (p \"ppp\")))) => ()"))) ((kind "manual-section") (section-title "High-level AST selector functions.") (section-body "In this section we describe a set of more elaborate functions that access the constituents of an AST. In many contexts, the functions in this section are more convenient than the basic selector functions from the previous section. ") (section-id "highlevel-ast-sel")) ((kind "manual-page") (parameters (parameter "ast" "The ast in which to locate a subtree") (parameter "el-name" "The ast element name of a subtree of ast (string or symbol)") (parameter "n" "The constituent number regarding el-name subtrees (an integer). Defaults to 1.")) (description "Return a specific subtree of ast, namely the n'th subtree with element-name el-name. If no such subtree exists, return #f. The first subtree of a given name counts as number 1 (not 0). ") (pre-condition "n > 0") (returns "A subtree of AST (if located) or #f") (form "(ast-subtree ast el-name [n])") (title "ast-subtree") (cross-references (reference "Scheme source file" "ast-subtree" "xml-in-laml-ep/xml-in-laml-1.html#ast-subtree") (internal-references "basic selector" "ast-subtrees") (internal-references "generalized accessors" "traverse-and-collect-all-from-ast" "traverse-and-collect-first-from-ast")) (examples (example "(ast-subtree (html (head (title \"ttt\")) (body (p \"ppp\"))) \"head\") => (ast \"head\" ((ast \"title\" (\"ttt\") () double xhtml10-transitional ())) () double xhtml10-transitional ())") (example "(ast-subtree (html (head (title \"ttt\")) (body (p \"ppp\"))) \"body\") => (ast \"body\" ((ast \"p\" (\"ppp\") () double xhtml10-transitional ())) () double xhtml10-transitional ())") (example "(ast-subtree (html (head (title \"ttt\")) (body (p \"ppp\"))) \"title\") => #f"))) ((kind "manual-page") (parameters (parameter "ast" "An AST.") (parameter "name" "The name of an attribute (a symbol).") (parameter "default-attribute-value" "The default value, used if no attribute of name is found. A string.")) (description "Return the value of the attribute name in ast, or #f if no such attribute exists. Only the attributes of ast are considered. This function is a convenient shortcut of (defauted-get-prop name (ast-attributes ast) default-value). The optional parameter serves as the attribute value in case no name attribute is found in the attribute list of ast. ") (form "(ast-attribute ast name [default-attribute-value])") (title "ast-attribute") (cross-references (reference "Scheme source file" "ast-attribute" "xml-in-laml-ep/xml-in-laml-1.html#ast-attribute") (internal-references "basic selector" "ast-attributes") (internal-references "related function" "unique-ast-attribute")) (examples (example "(ast-attribute (a 'href \"some-url\" 'target \"some-target\" \"anchor\") 'href) => \"some-url\"") (example "(ast-attribute (a 'href \"some-url\" 'target \"some-target\" \"anchor\") 'target) => \"some-target\""))) ((kind "manual-page") (parameters (parameter "attribute-name" "the attribute name - a symbol.") (parameter "default-value" "the default value returned if there is no attribute named attribute-name in the attribute-list.")) (description "A higher-order function which returns an attribute getter function on ASTs. The returned function takes an AST as parameter. ") (form "(attribute-getter attribute-name [default-value])") (title "attribute-getter") (cross-references (reference "Scheme source file" "attribute-getter" "xml-in-laml-ep/xml-in-laml-1.html#attribute-getter") (internal-references "lower-order function" "ast-attribute")) (examples (example "((attribute-getter 'href) (a 'href \"some-url\" 'target \"some-target\" \"anchor\")) => \"some-url\""))) ((cross-references (reference "Scheme source file" "ast-text" "xml-in-laml-ep/xml-in-laml-1.html#ast-text")) (kind "manual-page") (description "Return a string of the aggregated CDATA contents of ast. White space markers are taken into account, but ast subtrees of ast do not contribute in this aggregation. ") (form "(ast-text ast)") (returns "The immediate aggregated textual contents of ast. Returns the empty string, in case there is no contents.") (title "ast-text") (examples (example "(ast-text (a 'href \"some-url\" 'target \"some-target\" \"anchor\" _ \"text\")) => \"anchortext\"") (example "(ast-text (a 'href \"some-url\" 'target \"some-target\" \"anchor\" \"text\")) => \"anchor text\""))) ((cross-references (reference "Scheme source file" "ast-text-deep" "xml-in-laml-ep/xml-in-laml-1.html#ast-text-deep")) (kind "manual-page") (description "Return a string of the aggregated CDATA contents of ast. Ast subtrees of ast contribute recursively in this aggregation. White space markers are also taken into account. ") (form "(ast-text-deep ast)") (returns "The full aggregated textual contents of ast. Returns the empty string, in case there is no contents.") (title "ast-text-deep") (examples (example "(ast-text-deep (html (head (title \"ttt\")) (body (p \"ppp\")))) => \"ttt ppp\""))) ((kind "manual-page") (parameters (parameter "ast" "An AST.") (parameter "name" "The name of an internal attribute (a symbol).") (parameter "default-attribute-value" "The default value, used if no attribute of name is found. Of arbitrary type. ")) (description "Return the value of the internal attribute name in ast, or #f if the internal attribute does not exist. This function is a convenient shortcut of (defauted-get-prop name (ast-internal-attributes ast) default-value). The optional parameter serves as the internal attribute value in case no name attribute is found in the attribute list of ast. ") (form "(ast-internal-attribute ast name [default-attribute-value])") (title "ast-internal-attribute") (cross-references (reference "Scheme source file" "ast-internal-attribute" "xml-in-laml-ep/xml-in-laml-1.html#ast-internal-attribute") (internal-references "basic selector" "ast-internal-attributes") (internal-references "internal attribute mutators" "ast-mutators")) (examples (example "(ast-internal-attribute (a 'href \"some-url\" 'target \"some-target\" \"anchor\") 'href) => #f"))) ((kind "manual-page") (description "Does the internal ast attribute called name exist? ") (returns "A boolean answer (#t or #f).") (title "has-internal-ast-attribute?") (form (has-internal-ast-attribute? ast name)) (cross-references (reference "Scheme source file" "has-internal-ast-attribute?" "xml-in-laml-ep/xml-in-laml-1.html#has-internal-ast-attribute?") (internal-references "basic selector" "ast-internal-attributes") (internal-references "internal attribute mutators" "ast-mutators")) (examples (example "(has-internal-ast-attribute? (a 'href \"some-url\" 'target \"some-target\" \"anchor\") 'href) => #f"))) ((cross-references (reference "Scheme source file" "selected-internal-attributes" "xml-in-laml-ep/xml-in-laml-1.html#selected-internal-attributes")) (kind "manual-page") (parameters (parameter "ast" "An AST.") (parameter "prefix" "A string.")) (description "Return those of the internal attributes of ast whose attribute name are prefixed with prefix. The attribute names are truncated, by removing the prefix from them. (This may lead to empty attribut names in case some attribute names are equal to prefix). This function is convenient if you need to extract a subset of systematically prefixed internal attributes and pass the non-prefixed attributes on to another function. ") (returns "A property list of attributes. The prefix has been romoved from the attribute names.") (title "selected-internal-attributes") (form (selected-internal-attributes ast prefix)) (examples)) ((kind "manual-section") (section-title "AST Mutators.") (section-body "ASTs can only be mutated with respect to the internal attributes. In this section you will find a set of such mutators. In addition we provide a functional mutator of AST attributes. ") (section-id "ast-mutators")) ((cross-references (reference "Scheme source file" "copy-ast-mutate-attributes" "xml-in-laml-ep/xml-in-laml-1.html#copy-ast-mutate-attributes")) (kind "manual-page") (parameters (parameter "ast" "An AST") (parameter "new-attributes" "A property list of attributes which should replace existing attributes of ast.")) (description "Shallow copy ast and replace selected attributes of ast with new attributes. If the attributes in new-attributes do not exist in ast, the new attributes are just added. Only one AST node is copied by this function. ") (returns "A copy of AST in which the attributes in new-attributes replaces attributes in the original AST.") (title "copy-ast-mutate-attributes") (form (copy-ast-mutate-attributes ast . new-attributes)) (examples (example "(copy-ast-mutate-attributes (a 'href \"url\" 'target \"target\") 'href \"111\" 'target \"222\" 'xxx \"333\") => (ast \"a\" () (href \"111\" target \"222\" xxx \"333\") double xhtml10-transitional ())") (example "(copy-ast-mutate-attributes (a 'href \"url\" 'target \"target\") 'href \"111\") => (ast \"a\" () (href \"111\" target \"target\") double xhtml10-transitional ())") (example "(copy-ast-mutate-attributes (a 'href \"url\" 'target \"target\")) => (ast \"a\" () (href \"url\" target \"target\") double xhtml10-transitional ())"))) ((cross-references (reference "Scheme source file" "set-internal-ast-attributes!" "xml-in-laml-ep/xml-in-laml-1.html#set-internal-ast-attributes!")) (kind "manual-page") (description "Replace the internal attributes of ast with the attributes in prop-list (a property list). Using this procedure, all existing internal attributes are replaced by a new set of attributes. A procedure, not a function. ") (title "set-internal-ast-attributes!") (form (set-internal-ast-attributes! ast prop-list)) (examples)) ((cross-references (reference "Scheme source file" "set-ast-attributes!" "xml-in-laml-ep/xml-in-laml-1.html#set-ast-attributes!")) (kind "manual-page") (description "Replace the attributes of ast with the attributes in prop-list (a property list). Using this procedure, all existing attributes are replaced by a new set of attributes. A procedure, not a function. ") (title "set-ast-attributes!") (form (set-ast-attributes! ast prop-list)) (examples)) ((cross-references (reference "Scheme source file" "set-internal-ast-attribute!" "xml-in-laml-ep/xml-in-laml-1.html#set-internal-ast-attribute!")) (kind "manual-page") (description "Mutate the value of the internal ast attribute name to value. If name does not exist as an internal attribute of ast, this function inserts the attribute in the internal attribute list (as the first key value pair). ") (title "set-internal-ast-attribute!") (form (set-internal-ast-attribute! ast name value)) (examples)) ((cross-references (reference "Scheme source file" "remove-internal-ast-attribute!" "xml-in-laml-ep/xml-in-laml-1.html#remove-internal-ast-attribute!")) (kind "manual-page") (description "Remove the internal attribute name and its value from the internal attribute list of ast. If the attribute called name exists more than once in ast, remove them all. ") (title "remove-internal-ast-attribute!") (form (remove-internal-ast-attribute! ast name)) (examples)) ((cross-references (reference "Scheme source file" "remove-ast-attribute!" "xml-in-laml-ep/xml-in-laml-1.html#remove-ast-attribute!")) (kind "manual-page") (description "Remove the attribute name and its value from the attribute list of ast. If the attribute called name exists more than once in ast, remove them all. ") (title "remove-ast-attribute!") (form (remove-ast-attribute! ast name)) (examples)) ((cross-references (reference "Scheme source file" "remove-ast-attributes!" "xml-in-laml-ep/xml-in-laml-1.html#remove-ast-attributes!")) (kind "manual-page") (description "Remove all the attributes in name-list and their values from the attribute list of ast. If an attribute in name-list exists more than once in ast, remove them all. ") (title "remove-ast-attributes!") (form (remove-ast-attributes! ast name-list)) (examples)) ((kind "manual-section") (section-title "XML-in-LAML Predicates.") (section-body "The functions in this section are predicates that work on ASTs and their constituents. ") (section-id "ast-pred")) ((cross-references (reference "Scheme source file" "ast?" "xml-in-laml-ep/xml-in-laml-1.html#ast?")) (kind "manual-page") (description "Is the parameter x an AST. ") (form "(ast? x)") (title "ast?") (examples (example "(ast? \"txt\") => #f") (example "(ast? (a 'href \"some-url\" 'target \"some-target\" \"anchor\")) => #t"))) ((cross-references (reference "Scheme source file" "ast-strong?" "xml-in-laml-ep/xml-in-laml-1.html#ast-strong?")) (kind "manual-page") (description "Is the parameter x an AST in a stronger interpretation than ast? Using the native LAML representation, ast-strong? and ast? are identical. Using the SXML representation, (ast-strong? T) requires that the tree T has attribute and aux information. This corresponds to the 3. normal form of SXML. The strong predicate is used during the interpretation of parameters to the mirror functions. Rationale: If the weak ast predicate is used for interpretation of the mirror parameters, ambiguities will occur between lists of contents/attributes and AST structures. ") (form "(ast-strong? x)") (title "ast-strong?") (examples (example "(ast-strong? (a 'href \"some-url\" 'target \"some-target\" \"anchor\")) => #t") (example "(ast-strong? \"txt\") => #f"))) ((cross-references (reference "Scheme source file" "cdata?" "xml-in-laml-ep/xml-in-laml-1.html#cdata?")) (kind "manual-page") (description "Is the parameter x CDATA ") (form "(cdata? x)") (title "cdata?") (examples (example "(cdata? \"txt\") => #t"))) ((cross-references (reference "Scheme source file" "contents-data?" "xml-in-laml-ep/xml-in-laml-1.html#contents-data?")) (kind "manual-page") (description "Is the parameter x a contents element item. In other words, is x either an ast, a character reference, or a string. If the optional language parameter is passed, and if this language accepts extended contents, also numbers and characters are considered as contents data. ") (form "(contents-data? x [language])") (title "contents-data?") (examples (example "(contents-data? \"txt\") => #t") (example "(contents-data? (a 'href \"some-url\" 'target \"some-target\" \"anchor\")) => #t") (example "(contents-data? 5) => #f") (example "(contents-data? #\\5) => #f"))) ((kind "manual-page") (description "Is the parameter x a contents element item, with ASTs recognized in the strong form (using ast-strong?) ") (form "(contents-data-strong? x [language])") (title "contents-data-strong?") (cross-references (reference "Scheme source file" "contents-data-strong?" "xml-in-laml-ep/xml-in-laml-1.html#contents-data-strong?") (internal-references "strong ASTs" "ast-strong?")) (examples)) ((cross-references (reference "Scheme source file" "delayed-procedural-contents-element?" "xml-in-laml-ep/xml-in-laml-1.html#delayed-procedural-contents-element?")) (kind "manual-page") (description "Is x a delayed procedural content element? ") (title "delayed-procedural-contents-element?") (form (delayed-procedural-contents-element? x)) (examples)) ((cross-references (reference "Scheme source file" "char-ref?" "xml-in-laml-ep/xml-in-laml-1.html#char-ref?")) (kind "manual-page") (description "Is x a character reference. ") (title "char-ref?") (form (char-ref? x)) (examples (example "(char-ref? (char-ref 5)) => #t") (example "(char-ref? (char-ref 169)) => #t") (example "(char-ref? (char-ref \"copy\")) => #t"))) ((cross-references (reference "Scheme source file" "forced-white-space?" "xml-in-laml-ep/xml-in-laml-1.html#forced-white-space?")) (kind "manual-page") (description "Is the parameter x a white space mark. ") (title "forced-white-space?") (form (forced-white-space? x)) (examples (example "(forced-white-space? \" \") => #f") (example "(forced-white-space? #t) => #t") (example "(forced-white-space? #f) => #f"))) ((cross-references (reference "Scheme source file" "white-space-suppress?" "xml-in-laml-ep/xml-in-laml-1.html#white-space-suppress?")) (kind "manual-page") (description "Is the parameter x a white suppress space mark. ") (title "white-space-suppress?") (form (white-space-suppress? x)) (examples (example "(white-space-suppress? _) => #t") (example "(white-space-suppress? #f) => #t") (example "(white-space-suppress? #t) => #f"))) ((cross-references (reference "Scheme source file" "white-space-related?" "xml-in-laml-ep/xml-in-laml-1.html#white-space-related?")) (kind "manual-page") (description "Is the parameter x white space related? ") (title "white-space-related?") (form (white-space-related? x)) (examples (example "(white-space-related? _) => #t") (example "(white-space-related? #f) => #t") (example "(white-space-related? #t) => #t") (example "(white-space-related? \" \") => #f"))) ((cross-references (reference "Scheme source file" "terminal-ast-node?" "xml-in-laml-ep/xml-in-laml-1.html#terminal-ast-node?")) (kind "manual-page") (description "Is x an ast nodes without subtrees? ") (title "terminal-ast-node?") (form (terminal-ast-node? x)) (examples (example "(terminal-ast-node? (a 'href \"some-url\" 'target \"some-target\" \"anchor\")) => #f") (example "(terminal-ast-node? (br)) => #t") (example "(terminal-ast-node? (html (head (title \"ttt\")) (body (p \"ppp\")))) => #f"))) ((cross-references (reference "Scheme source file" "xml-comment?" "xml-in-laml-ep/xml-in-laml-1.html#xml-comment?")) (kind "manual-page") (description "Is x an XML comment? ") (title "xml-comment?") (form (xml-comment? x)) (examples (example "(xml-comment? (xml-comment \"ccc\")) => #t") (example "(xml-comment? \"ccc\") => #f"))) ((cross-references (reference "Scheme source file" "cdata-section?" "xml-in-laml-ep/xml-in-laml-1.html#cdata-section?")) (kind "manual-page") (description "Is x an XML CDATA section? ") (title "cdata-section?") (form (cdata-section? x)) (examples (example "(cdata-section? (cdata-section \"xxx\" 5 #\\5)) => #t") (example "(cdata-section? \"xxx\") => #f"))) ((cross-references (reference "Scheme source file" "processing-instruction?" "xml-in-laml-ep/xml-in-laml-1.html#processing-instruction?")) (kind "manual-page") (description "Is x an XML processing instruction? ") (title "processing-instruction?") (form (processing-instruction? x)) (examples (example "(processing-instruction? (processing-instruction \"i\" \"xxx\" \"yyy\")) => #t"))) ((cross-references (reference "Scheme source file" "ast-of-type?" "xml-in-laml-ep/xml-in-laml-1.html#ast-of-type?")) (kind "manual-page") (parameters (parameter "type" "One of the symbols element-name, kind, or language.") (parameter "name" "The element-name, the kind-name (double or single), or the language-name, depending on the value of the parameter type. A string.")) (description "A higher-order function that returns an AST predicate, which checks if the type of the AST is name. The type is either element-name, kind, or language (a symbol). The resulting predicate may be applied on both ASTs and non-ASTs. If applied on a non-AST, the predicate always returns false. If type is the symbol element-name, the generated predicate checks if a given AST has that element name at top level. If type is the symbol kind, the generated predicate checks if a given AST is either double or single. If type is the symbol language, the generated predicate checks if a given AST belongs to the language. ") (returns "A specialized AST predicate.") (title "ast-of-type?") (form (ast-of-type? type name)) (examples (example "((ast-of-type? 'element-name \"a\") (a 'href \"some-url\" 'target \"some-target\" \"anchor\")) => #t") (example "((ast-of-type? 'kind \"double\") (a 'href \"some-url\" 'target \"some-target\" \"anchor\")) => #t") (example "((ast-of-type? 'language \"xhtml10-transitional\") (a 'href \"some-url\" 'target \"some-target\" \"anchor\")) => #t") (example "((ast-of-type? 'xxx \"yyy\") (a 'href \"some-url\" 'target \"some-target\" \"anchor\")): ERROR"))) ((kind "manual-section") (section-title "Character Entities.") (section-body "The function char-ref returns a character-reference. In XML, character references are used to denote characters which are not directly accessible from normal input devices. Notice that the predicated char-ref? is located in the AST predicate section. ") (section-id "char-ent")) ((cross-references (reference "Scheme source file" "char-ref" "xml-in-laml-ep/xml-in-laml-1.html#char-ref")) (kind "manual-page") (description "Return a character reference value for x. The parameter may be a positive, decimal integer or a symbolic name (string or symbol), such as amp, gt, or lt. Character references are represented internally as an appropriate list structure, similar to an AST list structure. In xml-render, these structures are converted to XML's character notation. With this we avoid a conflict with character transformation using the HTML transformation tables. ") (title "char-ref") (form (char-ref x)) (examples (example "(char-ref 169) => (char-ref 169)") (example "(char-ref \"copy\") => (char-ref copy)"))) ((cross-references (reference "Scheme source file" "char-ref-value" "xml-in-laml-ep/xml-in-laml-1.html#char-ref-value")) (kind "manual-page") (description "Return the number or symbol of char-ref-structure. ") (title "char-ref-value") (form (char-ref-value char-ref-structure)) (examples (example "(char-ref-value (char-ref \"copy\")) => copy"))) ((kind "manual-section") (section-title "XML Comments.") (section-body "The xml-comment form documented below allows for native XML comments in an XML-in-LAML document. Use the xml-comment form if it is important for you that LAML outputs native XML comments. In other cases, you may use Scheme comments in your LAML document. XML comments are not rendered if they occur in empty elements. ") (section-id "xml-comments")) ((cross-references (reference "Scheme source file" "xml-comment" "xml-in-laml-ep/xml-in-laml-1.html#xml-comment")) (kind "manual-page") (description "Construct an XML comment and return it. This function accepts a list of comment text elements, which together form the aggregated comment text. In this context, a comment text element is a string, or a value which can be converted to a string via use of the function as-string. ") (pre-condition "The substring \"--\" does not occur as part of a comment text element.") (title "xml-comment") (form (xml-comment . comment-text-list)) (examples (example "(xml-comment \"ccc\") => (xml-comment (\"ccc\"))"))) ((cross-references (reference "Scheme source file" "xml-comment-contents" "xml-in-laml-ep/xml-in-laml-1.html#xml-comment-contents")) (kind "manual-page") (description "Return the comment text of an XML comment. ") (returns "a list of strings.") (title "xml-comment-contents") (form (xml-comment-contents xml-comment)) (examples (example "(xml-comment-contents (xml-comment \"ccc\")) => (\"ccc\")") (example "(xml-comment-contents (xml-comment \"ccc\" \"ddd\" 5)) => (\"ccc\" \"ddd\" \"5\")"))) ((cross-references (reference "Scheme source file" "xml-render-xml-comment" "xml-in-laml-ep/xml-in-laml-1.html#xml-render-xml-comment")) (kind "manual-page") (description "Render the xml-comment with space in between the individual comment text elements. ") (returns "The rendered string.") (title "xml-render-xml-comment") (form (xml-render-xml-comment xml-comment)) (examples)) ((kind "manual-section") (section-title "XML CDATA Sections.") (section-body "CDATA sections are typically used in script and style elements, to protect the characters '<', '>', and others. Most browsers do not render CDATA sections, if they appear within the textual contents. ") (section-id "cdata-sections")) ((cross-references (reference "Scheme source file" "cdata-section" "xml-in-laml-ep/xml-in-laml-1.html#cdata-section")) (kind "manual-page") (description "Construct an XML CDATA section and return it. This function accepts a list of comment text elements, which together form the aggregated CDATA section text. In this context, a CDATA text element is a string, or a value which can be converted to a string via use of the function as-string. ") (pre-condition "The substring \"]]>\" does not occur as part of a CDATA text element.") (title "cdata-section") (form (cdata-section . cdata-text-list)) (examples (example "(cdata-section \"xxx\" \"yyy\") => (cdata-section (\"xxx\" \"yyy\"))"))) ((cross-references (reference "Scheme source file" "cdata-section-contents" "xml-in-laml-ep/xml-in-laml-1.html#cdata-section-contents")) (kind "manual-page") (description "Return the cdata text of an XML comment. ") (returns "a list of strings.") (title "cdata-section-contents") (form (cdata-section-contents cdata-section)) (examples (example "(cdata-section-contents (cdata-section \"xxx\" \"yyy\")) => (\"xxx\" \"yyy\")") (example "(cdata-section-contents (cdata-section \"xxx\" 5 #\\5)) => (\"xxx\" \"5\" \"5\")"))) ((cross-references (reference "Scheme source file" "xml-render-cdata-section" "xml-in-laml-ep/xml-in-laml-1.html#xml-render-cdata-section")) (kind "manual-page") (description "Render the cdata section with space in between the individual cdata text elements. ") (returns "The rendered string.") (title "xml-render-cdata-section") (form (xml-render-cdata-section cdata-section)) (examples)) ((kind "manual-section") (section-title "XML Processing Instructions.") (section-body "A processing instruction is an XML technicality for telling something to an application, which processes the document. Processing instructions are only rendered if they occur in non-empty elements. ") (section-id "processing-instructions")) ((cross-references (reference "Scheme source file" "processing-instruction" "xml-in-laml-ep/xml-in-laml-1.html#processing-instruction")) (kind "manual-page") (parameters (parameter "pi-target" "A name used to identify the application, towards which the instruction is targeted. ") (parameter "text-list" "Additional text (a list) ")) (description "Construct an XML processing instruction and return it. This function accepts a pitarget and a list of text elements. In this context, text element is a string, or a value which can be converted to a string via use of the function as-string. ") (pre-condition "The substring \"?>\" does not occur as part of a CDATA text element. The pi-target is not \"XML\" (using upper or lower cases).") (title "processing-instruction") (form (processing-instruction pi-target . text-list)) (examples (example "(processing-instruction \"i\" \"xxx\" \"yyy\") => (processing-instruction \"i\" (\"xxx\" \"yyy\"))"))) ((cross-references (reference "Scheme source file" "processing-instruction-target" "xml-in-laml-ep/xml-in-laml-1.html#processing-instruction-target")) (kind "manual-page") (description "Return the processing instruction pi-target of the processing instruction pi. ") (returns "a text string.") (title "processing-instruction-target") (form (processing-instruction-target pi)) (examples)) ((cross-references (reference "Scheme source file" "processing-instruction-contents" "xml-in-laml-ep/xml-in-laml-1.html#processing-instruction-contents")) (kind "manual-page") (description "Return the processing instruction text part of the processing instruction pi. ") (returns "a list of strings.") (title "processing-instruction-contents") (form (processing-instruction-contents pi)) (examples (example "(processing-instruction-contents (processing-instruction \"i\" \"xxx\" \"yyy\")) => (\"xxx\" \"yyy\")"))) ((cross-references (reference "Scheme source file" "xml-render-processing-instruction" "xml-in-laml-ep/xml-in-laml-1.html#xml-render-processing-instruction")) (kind "manual-page") (description "Render the processing instruction pi. ") (returns "The rendered string.") (title "xml-render-processing-instruction") (form (xml-render-processing-instruction pi)) (examples)) ((kind "manual-section") (section-title "XML Language Bookkeeping.") (section-body "XML-in-LAML keeps track of the XML-in-LAML languages in use, and it will warn you if an ambiguously named mirror function is used. The boolean variable xml-check-language-overlap? can be used to control the reporting of language overlaps (use of ambiguous mirror functions.)<p> Each XML language has a name when used in LAML. The names of all loaded mirrors is returned by the parameter-less function languages-in-use. If N is the name of an XML-in-LAML language, (N 'el-name) returns the mirror function named el-name in N.<p> A language map is an association list that maps mirror function names to the mirror functions. Via use of a language map, it is always possible to acces a mirror function independt of name clashes with other XML language mirrors. ") (section-id "language-bookkeeping")) ((cross-references (reference "Scheme source file" "xml-in-laml-name-clashes" "xml-in-laml-ep/xml-in-laml-1.html#xml-in-laml-name-clashes")) (kind "manual-page") (description "The list of names (symbols) which causes name clashes relative to the current set of languages in use. Assigned by register-xml-in-laml-language. Thus, this variable is always up-to-date in between registrations of languages. Be careful not to redefine this variable by double loading this file. ") (title "xml-in-laml-name-clashes") (form xml-in-laml-name-clashes) (examples)) ((cross-references (reference "Scheme source file" "register-xml-in-laml-language" "xml-in-laml-ep/xml-in-laml-1.html#register-xml-in-laml-language")) (kind "manual-page") (description "Register that language (the first parameter) is an XML language in use in the current LAML session. This function is called by the mirror function libraries. The first parameter, language, is a symbol. The second parameter, language-map, is the language map of the language. As a precondition it is assumed that we do not register the same language more than once. ") (title "register-xml-in-laml-language") (form (register-xml-in-laml-language language language-map)) (examples)) ((cross-references (reference "Scheme source file" "language-map-of" "xml-in-laml-ep/xml-in-laml-1.html#language-map-of")) (kind "manual-page") (description "Return the language map of language. If language is not registered via register-xml-in-laml-language, return #f. The parameter language is a symbol. ") (title "language-map-of") (form (language-map-of language)) (examples)) ((cross-references (reference "Scheme source file" "language-in-use?" "xml-in-laml-ep/xml-in-laml-1.html#language-in-use?")) (kind "manual-page") (description "is language in use - is it registered as an xml-in-laml language? ") (title "language-in-use?") (form (language-in-use? language)) (examples (example "(language-in-use? 'xhtml10-transitional) => #t"))) ((cross-references (reference "Scheme source file" "languages-in-use" "xml-in-laml-ep/xml-in-laml-1.html#languages-in-use")) (kind "manual-page") (description "Return the list of language in used, as registered by register-xml-in-laml-language. ") (title "languages-in-use") (form (languages-in-use)) (examples (example "(languages-in-use) => (xhtml10-transitional)"))) ((cross-references (reference "Scheme source file" "element-names-of-language" "xml-in-laml-ep/xml-in-laml-1.html#element-names-of-language")) (kind "manual-page") (description "Return the element names of language, as defined by its language map. ") (title "element-names-of-language") (form (element-names-of-language language)) (examples (example "(element-names-of-language 'xhtml10-transitional) => (td th tr col colgroup tbody tfoot thead caption table isindex button legend fieldset textarea option optgroup select input label form area map img applet param object font basefont strike s u small big b i tt sup sub q acronym abbr cite var kbd samp code dfn strong em br bdo span a del ins center blockquote pre hr address dd dt dl li dir menu ol ul h6 h5 h4 h3 h2 h1 p div body noframes iframe noscript script style link meta base title head html)"))) ((cross-references (reference "Scheme source file" "causes-xml-in-laml-name-clash?" "xml-in-laml-ep/xml-in-laml-1.html#causes-xml-in-laml-name-clash?")) (kind "manual-page") (description "Is name involved in a name clash among the registered xml-in-laml languages? ") (title "causes-xml-in-laml-name-clash?") (form (causes-xml-in-laml-name-clash? name)) (examples)) ((cross-references (reference "Scheme source file" "activator-via-language-map" "xml-in-laml-ep/xml-in-laml-1.html#activator-via-language-map")) (kind "manual-page") (parameters (parameter "language" "The name of an XML language (a symbol).")) (description "Return an activator function for language. ") (returns "A function which given an XML element name (a string or a symbol) in language returns the appropriate mirror function.") (title "activator-via-language-map") (form (activator-via-language-map language)) (examples)) ((kind "manual-page") (parameters (parameter "language-name" "The name of a language map (a symbol).") (parameter "forms" "A number of Scheme forms presumably involving mirror function names from the XML language language-name.")) (description "A macro which globally establishes the name bindings of xml-language and evaluate forms in this state. Does also handle separate checking of ID and IDREF attributes in forms. Works in a manner similar to a fluid-let. As a matter of optimization, only assign the names in the overlap between the XML languages in use. Defined as a syntactical abstraction. ") (form "(with-xml-languge language-name . forms)") (misc "If the overlap between the XML languages in use includes central Scheme functions, such as map or filter, you should use with-xml-language! instead (and put the central Scheme functions in the minus-elements).") (returns "The value of the last expression in forms") (title "with-xml-language") (cross-references (reference "Scheme source file" "with-xml-language" "xml-in-laml-ep/xml-in-laml-1.html#with-xml-language") (internal-references "similar function" "with-xml-language!")) (examples)) ((kind "manual-page") (parameters (parameter "language-name" "The name of a language map (a symbol).") (parameter "minus-elements" "The list of element names which are not allowed to be reassigned. ") (parameter "forms" "A number of Scheme forms presumably involving mirror function names from the XML language language-name.")) (description "A macro which globally establishes the name bindings of xml-language and evaluate forms in this state. Does also handle separate checking of ID and IDREF attributes in forms. Works in a manner similar to a fluid-let. All elements of xml-language are redefined, except the explictly given minus elements. ") (form "(with-xml-languge! language-name minus-elements . forms)") (returns "The value of the last expression in forms") (title "with-xml-language!") (cross-references (reference "Scheme source file" "with-xml-language!" "xml-in-laml-ep/xml-in-laml-1.html#with-xml-language!") (internal-references "similar function" "with-xml-language")) (examples)) ((kind "manual-section") (section-title "The Language Map.") (section-body "The language map is a mapping that allows us to access the element mirror functions independent of any name clash. In this version of LAML the language map is an association that maps element names (symbols) to function objects. In the longer run, it should be a more efficient search structure. ") (section-id "language-map")) ((cross-references (reference "Scheme source file" "get-mirror-function" "xml-in-laml-ep/xml-in-laml-1.html#get-mirror-function")) (kind "manual-page") (parameters (parameter "element-name" "The name an XML element. Either a symbol or a string.")) (description "Return the mirror function based on element-name from language map. ") (returns "The mirror function or #f if no mirror function exists in the map.") (title "get-mirror-function") (form (get-mirror-function language-map element-name)) (examples)) ((cross-references (reference "Scheme source file" "put-mirror-function" "xml-in-laml-ep/xml-in-laml-1.html#put-mirror-function")) (kind "manual-page") (description "Update the language map by the association of element-name and mirror function. Returns the updated map. The parameter element-name is either a symbol or a string. Causes an error if there already is an entry for element-name ") (title "put-mirror-function") (form (put-mirror-function language-map element-name mirror-function)) (examples)) ((kind "manual-section") (section-title "XML Navigation Information.") (section-body "XML navigation information provides for \"smart searching\" of XML ASTs. The smartness is based on the following knowledge: (1) The possible direct and indirect sub-elements of a given element. (2) The possible attributes of an element and its direct and indirect sub-elements. This information is pre-computed in the XML-in-LAML mirror generation tool. The functions in this section provides access to this pre-computed information. Notice that the functions in this section return static information, as derived from the DTD. ") (section-id "xml-navigation")) ((cross-references (reference "Scheme source file" "register-xml-in-laml-navigator" "xml-in-laml-ep/xml-in-laml-1.html#register-xml-in-laml-navigator")) (kind "manual-page") (description "Register navigator-structure and an XML-in-LAML navigator for language. This function is called \"automatically\" when the mirror functions are loaded. ") (title "register-xml-in-laml-navigator") (form (register-xml-in-laml-navigator language navigator-structure)) (examples)) ((cross-references (reference "Scheme source file" "xml-navigator-of" "xml-in-laml-ep/xml-in-laml-1.html#xml-navigator-of")) (kind "manual-page") (description "Return the XML navigator structure of language. If language is not registered via register-xml-in-laml-language, return #f. The parameter language is a symbol. ") (title "xml-navigator-of") (form (xml-navigator-of language)) (examples)) ((cross-references (reference "Scheme source file" "possible-elements-rooted-by-element" "xml-in-laml-ep/xml-in-laml-1.html#possible-elements-rooted-by-element")) (kind "manual-page") (description "Return a list of element names that can appear as direct or indirect constituents of an AST rooted by element-name. Reflexively, element-name will always be returned as part of the result. ") (pre-condition "language is a registered XML language in the enclosing LAML session, and element-name is an existing name of an element in language.") (returns "The list of possible elements names (a list of symbols). The list is sorted alphabetically.") (title "possible-elements-rooted-by-element") (form (possible-elements-rooted-by-element element-name language)) (examples (example "(possible-elements-rooted-by-element \"html\" 'xhtml10-transitional) => (a abbr acronym address applet area b base basefont bdo big blockquote body br button caption center cite code col colgroup dd del dfn dir div dl dt em fieldset font form h1 h2 h3 h4 h5 h6 head hr html i iframe img input ins isindex kbd label legend li link map menu meta noframes noscript object ol optgroup option p param pre q s samp script select small span strike strong style sub sup table tbody td textarea tfoot th thead title tr tt u ul var)") (example "(possible-elements-rooted-by-element \"title\" 'xhtml10-transitional) => (title)"))) ((cross-references (reference "Scheme source file" "possible-attributes-rooted-by-element" "xml-in-laml-ep/xml-in-laml-1.html#possible-attributes-rooted-by-element")) (kind "manual-page") (description "Return a list of attribute names that can appear as direct or indirect constituents of an AST rooted by element-name. Reflexively, the attributes of element-names are always parts of the result. ") (pre-condition "language is a registered XML language in the enclosing LAML session, and element-name is an existing name of an element in language.") (returns "The list of possible attribute names (a list of symbols). The list is sorted alphabetically.") (title "possible-attributes-rooted-by-element") (form (possible-attributes-rooted-by-element element-name language)) (examples (example "(possible-attributes-rooted-by-element \"br\" 'xhtml10-transitional) => (class clear id style title)"))) ((cross-references (reference "Scheme source file" "can-have-element-constituent?" "xml-in-laml-ep/xml-in-laml-1.html#can-have-element-constituent?")) (kind "manual-page") (parameters (parameter "ast" "An AST") (parameter "el-name" "is the name of an element in the language of ast (a string or a symbol).")) (description "Can ast have a direct or indirect constituent (sub-ast) with element name el-name. The result is always true if (ast-element-name ast) equals to el-name. ") (title "can-have-element-constituent?") (form (can-have-element-constituent? ast el-name)) (examples)) ((kind "manual-section") (section-title "Mirror Generation Functions.") (section-body "The function generate-xml-mirror-function is the (higher-order) function that generates the mirror of XML elements in Scheme. In addition, this section contains the function that implement the LAML parameter passing rules of the mirror functions, namely, xml-sort-tag-parameters. ") (section-id "mirror-gen")) ((kind "manual-page") (description "Separates parameters according to the mirror rules of LAML. In other words, this is the function which implements the central LAML mirror function rules. Returns a cons cell of contents and attributes. Attributes are returned in property list format. Contents are returned as a list contents elements (strings, ASTs, booleans). ") (form "(xml-sort-tag-parameters parameters tag-name [language])") (title "xml-sort-tag-parameters") (cross-references (reference "Scheme source file" "xml-sort-tag-parameters" "xml-in-laml-ep/xml-in-laml-1.html#xml-sort-tag-parameters") (internal-references "similar function" "xml-sort-superficially-tag-parameters")) (examples (example "(xml-sort-tag-parameters (list \"this\" _ \"is\" 'href \"url\" \"end\") \"a\" 'xhtml10-transitional) => ((\"this\" \"is\" #t \"end\") href \"url\")") (example "(xml-sort-tag-parameters (list \"this\" \"is\" 'href \"url\" \"end\") \"a\" 'xhtml10-transitional) => ((\"this\" #t \"is\" #t \"end\") href \"url\")"))) ((kind "manual-page") (description "Like xml-sort-tag-parameters, but collect the content contribution in a relatively raw surface form. Handle attributes in the same way as xml-sort-tag-parameters. As a contrast to xml-sort-tag-parameters, white space related values are passed unchanged by this function. Use this kind of 'sorting' to obtain XML-in-LAML parameter passing in abstractions, which transfer data to XML-in-LAML mirror functions (which in turn use xml-sort-tag-parameters). ") (form "(xml-sort-superficially-tag-parameters parameters tag-name [language])") (title "xml-sort-superficially-tag-parameters") (cross-references (reference "Scheme source file" "xml-sort-superficially-tag-parameters" "xml-in-laml-ep/xml-in-laml-1.html#xml-sort-superficially-tag-parameters") (internal-references "similar function" "xml-sort-tag-parameters")) (examples (example "(xml-sort-superficially-tag-parameters (list \"this\" \"is\" 'href \"url\" \"end\") \"a\" 'xhtml10-transitional) => ((\"this\" #t \"is\" #t \"end\") href \"url\")") (example "(xml-sort-superficially-tag-parameters (list \"this\" _ \"is\" 'href \"url\" \"end\") \"a\" 'xhtml10-transitional) => ((\"this\" #f \"is\" #t \"end\") href \"url\")"))) ((kind "manual-page") (description "Prepare laml-list to be used as input to a mirror function. This function is useful when the result of transform-ast-list is passed as input to a XML mirror function. Elimiate forced-white-space markers, and introduce explict-space-suppres when necessary. ") (title "laml-source-prepare") (form (laml-source-prepare laml-lst)) (cross-references (reference "Scheme source file" "laml-source-prepare" "xml-in-laml-ep/xml-in-laml-1.html#laml-source-prepare") (internal-references "in relation to" "transform-ast-list")) (examples)) ((cross-references (reference "Scheme source file" "generate-xml-mirror-function" "xml-in-laml-ep/xml-in-laml-1.html#generate-xml-mirror-function")) (kind "manual-page") (parameters (parameter "validation-procedure" "the procedure that validates all aspects of the application of the element mirror function.") (parameter "tag-name" "a string which represents the name of the tag (used for error message purposes).") (parameter "default-dtd-attributes" "an alist of attribute key value pairs, as specified in the DTD. ") (parameter "single-double-kind" "either the symbol single, double or possible-single.") (parameter "language" "the language in use (a symbol).") (parameter "overlap-check?" "controls whether to check for name clashes in between the registered XML-in-LAML languages.") (parameter "action-procedure" "serves both as a boolean and a procedure. If #f, no action procedure is supplied. If #t, an action procedure exists. If a procedure, it is the action procedure.")) (description "Return an XML mirror surface function, in which textual content parameters and attribute value pairs can be given in a very liberal fashion. In the generated mirror function, the internal attribute run-action-procedure controls if an action procedure is executed. (The value false of internal:run-action-procedure prevents an associated action procedure to be executed. The default value of the internal attribute is true). ") (title "generate-xml-mirror-function") (form (generate-xml-mirror-function validation-procedure tag-name default-dtd-attributes single-double-kind language overlap-check? action-procedure)) (examples)) ((kind "manual-section") (section-title "Contents Validation.") (section-body " The definitions in this section carry out the content validation. Throughout the procedures in this section it is assumed that delayed procedural content items have been expaneded before content validation is attempted. ") (section-id "validation")) ((cross-references (reference "Scheme source file" "validate-contents-by-dfa!" "xml-in-laml-ep/xml-in-laml-1.html#validate-contents-by-dfa!")) (kind "manual-page") (parameters (parameter "contents" "A list of content items, such as strings, ASTs and white space markers.") (parameter "dfa" "A deterministic final state automation which controls the acceptance.") (parameter "tag-name" "The name of the element - used for error message purposes. ")) (description "Apply the deterministic finte state automaton dfa on contents. If contents is not accepted call xml-check-error for an appropriate reporting of the validation error. ") (title "validate-contents-by-dfa!") (form (validate-contents-by-dfa! contents dfa tag-name)) (examples)) ((cross-references (reference "Scheme source file" "validate-as-pcdata!" "xml-in-laml-ep/xml-in-laml-1.html#validate-as-pcdata!")) (kind "manual-page") (parameters (parameter "contents" "A list of content items, such as strings, ASTs and white space markers.") (parameter "tag-name" "The name of the element - used for error message purposes. ")) (description "Validate that contents is pure PCDATA. ") (title "validate-as-pcdata!") (form (validate-as-pcdata! contents tag-name)) (examples)) ((cross-references (reference "Scheme source file" "validate-mixed-contents-by-simple-means!" "xml-in-laml-ep/xml-in-laml-1.html#validate-mixed-contents-by-simple-means!")) (kind "manual-page") (parameters (parameter "contents" "A list of content items, such as strings, ASTs or white space markers.") (parameter "tag-name" "The name of the element in which we check the constituents.") (parameter "symbol-choice-list" "A list of symbols for the possible choices - a list of symbols.")) (description "Validate that contents corresponds to mixed contents. Mixed contents includes PCDATA a number of other choices in a 'zero-or-more' structure. It means that it is PCDATA or one of a number of possible ASTs. ") (title "validate-mixed-contents-by-simple-means!") (form (validate-mixed-contents-by-simple-means! contents symbol-choice-list tag-name)) (examples)) ((cross-references (reference "Scheme source file" "extraordinary-allow-element?" "xml-in-laml-ep/xml-in-laml-1.html#extraordinary-allow-element?")) (kind "manual-page") (description "Is element-name extraordinarily allowed within context-element-name (both symbols). By redefining this function you may extraordinarily allow element-name to appear within context-element-name. By default, this function always returns the value #f (false). ") (title "extraordinary-allow-element?") (form (extraordinary-allow-element? element-name context-element-name)) (examples)) ((kind "manual-section") (section-title "Attribute Checking.") (section-body " The definitions in this section is used by the validation procedures, which are specific for each supported XML language. <em> Current status of attribute checking</em>: From LAML version 27: The constrains regarding ID, IDREF, and IDREFS are now handled. See the function check-id-and-idref-attributes!. NotationTypes are not dealt with - mostly because I have never encountered them, so the motivation to program check for this special enumeration type is not high. The #FIXED default keyword is present in the parsed DTD information, but we do not carry out any check against it (which is: If the attribute is given it must have the fixed default value). The attribute value normalization called for in section 3.3.3 of the XML specificaiton is not done either. Attribute duplication is checked for, as well as presence of angle characters in attribute values. ") (section-id "attribute-check")) ((cross-references (reference "Scheme source file" "xml-check-attributes!" "xml-in-laml-ep/xml-in-laml-1.html#xml-check-attributes!")) (kind "manual-page") (description "Check the attributes (first par) in the calling form against the attribute definitions taken from the DTD file (second par). The first parameter, attribute, is the attributes of the calling form, on property list form: (a1 v1 ... an vn). ai is a symbol and vi is a string. The second parameter dtd-attribute-definition is the attributes as defined in the dtd for the element in question. The third parameter number-of-req-attributes is the number of required attributes in dtd-attr-definitions. It happens to be the case that all the required attributes are located in the front of dtd-attribute-definition. The fourth parameter, tag-name, is the name of the enclosing tag. dtd-attribute-definition is a list of triples (attr-name attr-type require-status). attr-name is a string, attr-type is a string or a list of strings (possibilities), and require-status is a string such as \"#IMPLIED\" or \"#REQUIRED\" ") (title "xml-check-attributes!") (form (xml-check-attributes! attributes dtd-attribute-definition number-of-req-attributes tag-name)) (examples)) ((cross-references (reference "Scheme source file" "check-id-and-idref-attributes!" "xml-in-laml-ep/xml-in-laml-1.html#check-id-and-idref-attributes!")) (kind "manual-page") (description "Check that the ID and IDREF attribute values are used according to the XML 1.0 specification. This function is called by the end-laml function, as redefined in this library (lib/xml-in-laml/xml-in-laml.scm). You may also chose to call this function yourself, as part of the processing of your XML document. This procedure resets the variables bookkeeping of ID and IDREF attribute checking such that if the procedure is called again it will not report the same errors again. ") (title "check-id-and-idref-attributes!") (form (check-id-and-idref-attributes!)) (examples)) ((kind "manual-section") (section-title "Link Checking.") (section-body "Web documents are able to link to other web documents. As an example, in XHTML the href attribute of the a element represents such a link. The procedures in this section are used to check that links actually address existing resources.")) ((kind "manual-page") (description "Collect the urls in xml-ast, which are about to be written to the file absolute-target-html-file (full path). The urls are collected in the global variables relative-url-list-for-later-checking and absolute-url-list-for-later-checking. The links are intended to be checked at a later point in time. Each XML language L comes with an URL extraction function, returned by (url-extractor-of-xml-language L), which returns a list of URLs when applied on an AST. Similarly, theres is a function (url-extractor-of-xml-language L) for handling of base URLs. ") (title "collect-links-for-later-checking-in-ast!") (form (collect-links-for-later-checking-in-ast! xml-ast absolute-target-html-file)) (cross-references (reference "Scheme source file" "collect-links-for-later-checking-in-ast!" "xml-in-laml-ep/xml-in-laml-1.html#collect-links-for-later-checking-in-ast!") (internal-references "URL extraction" "url-extractor-of-xml-language" "base-url-extractor-of-xml-language") (reference "About link checking in LAML" "Note" "../../../info/link-checking.html")) (examples)) ((kind "manual-page") (description "Checks the existense of the resources addressed by the urls in relative-urls Some of the elements may be boolean #f, which signals that they should not be checked. In a typical checking sessions, the same file or directory may be checked more than once. As an alternative to the current implementation of this function, we could eliminate duplicate entries in relative-url-list before the existence check is done. ") (title "check-relative-url-list!") (form (check-relative-url-list! relative-urls)) (cross-references (reference "Scheme source file" "check-relative-url-list!" "xml-in-laml-ep/xml-in-laml-1.html#check-relative-url-list!") (reference "About link checking in LAML" "Note" "../../../info/link-checking.html")) (examples)) ((kind "manual-page") (description "Checks the existense of the resources addressed by the urls in absoute-urls. A given URL in the list is only checked once. Also increment the counter absolute-url-problem-count in case of problems with absolute-urls. Requires the function url-target-exists? which is one of the LAML compatibility functions. Currently, we do not a have a good implementation of url-target-exists? in the LAML distribution. ") (title "check-absolute-url-list!") (form (check-absolute-url-list! absolute-urls)) (cross-references (reference "Scheme source file" "check-absolute-url-list!" "xml-in-laml-ep/xml-in-laml-1.html#check-absolute-url-list!") (reference "About link checking in LAML" "Note" "../../../info/link-checking.html")) (examples)) ((kind "manual-section") (section-title "XML validation procedures.") (section-body "The functions in this section provide access to the XML-in-LAML validation procedures. The validation functions are part of the mirrors of a given XML language in Scheme. In normal and native use of XML-in-LAML, the validation procedures are called by the mirror functions. If the internal AST structure is created by other means (for instance authored directly, or made via a parser) it is relevant to get access to the validation procedures. This is the rationale behind the functions in this section. Thus, the procedures in this section use the functions from the sections Contents Validation and Attribute Checking. ") (section-id "validation-functions")) ((cross-references (reference "Scheme source file" "validation-procedure-map-of" "xml-in-laml-ep/xml-in-laml-1.html#validation-procedure-map-of")) (kind "manual-page") (parameters (parameter "language" "The name of the language (string or symbol)")) (description "A validation procedure map of an XML language is a sorted, associative vector that maps element names to XML validation procedures. The validation procedures are produced by the XML-in-LAML mirror generation tool. This function returns the sorted associative vector of language. If no validation procedure map exists for language, this function returns false. ") (title "validation-procedure-map-of") (form (validation-procedure-map-of language)) (examples)) ((cross-references (reference "Scheme source file" "validation-procedure-of" "xml-in-laml-ep/xml-in-laml-1.html#validation-procedure-of")) (kind "manual-page") (parameters (parameter "element-name" "The name of the element (string or symbol)") (parameter "language" "The name of the language (string or symbol)")) (description "Return the XML validation procedure of the element named element-name in language. A validation procedure is created by the XML-in-LAML mirror generation tool on basis of an XML DTD of language. A validation procedure takes four parameters: element-name (string), attributes (property list), element content item list, and a boolean (XML language overlap check or not). If language does not make sense, or if the element is unknown in the validation procedure map, return #f ") (title "validation-procedure-of") (form (validation-procedure-of element-name language)) (examples)) ((cross-references (reference "Scheme source file" "register-xml-in-laml-validators" "xml-in-laml-ep/xml-in-laml-1.html#register-xml-in-laml-validators")) (kind "manual-page") (description "Register validator-structure for language. This function is called \"automatically\" when the mirror functions are loaded. ") (title "register-xml-in-laml-validators") (form (register-xml-in-laml-validators language validator-structure)) (examples)) ((kind "manual-page") (parameters (parameter "ast" "The internal representation of the document to be checked") (parameter "given-language" "The XML language to which ast belongs. Defaults to (ast-language ast). A symbol.") (parameter "language-overlap-check?" "Check for mutual naming overlap among the loaded XML languages. A boolean. Defaults to #t.")) (description "Validate ast. XML validation is integrated in the mirrors of the XML elements in Scheme. Thus, this procedure is only useful if the AST is created by other means (manually, or via a parser, for instance). Validation problems are reported by the procedure xml-check-error. This is a procedure that produces errors or warnings (depending on xml-check-error). The ast is valid if no error messages or warnings are produced by this function. ") (form "(validate-ast! ast [given-language language-overlap-check?])") (title "validate-ast!") (cross-references (reference "Scheme source file" "validate-ast!" "xml-in-laml-ep/xml-in-laml-1.html#validate-ast!") (internal-references "error function" "xml-check-error")) (examples)) ((kind "manual-section") (section-title "XML warning procedures.") (section-body "") (section-id "warning-proc")) ((cross-references (reference "Scheme source file" "display-xml-warning" "xml-in-laml-ep/xml-in-laml-1.html#display-xml-warning")) (kind "manual-page") (description "A variant of display-warning which prefixes the warning text with a 'XML Warning' prefix. ") (title "display-xml-warning") (form (display-xml-warning . messages)) (examples)) ((kind "manual-page") (description "The procedure that reports XML validation errors. The default is display-xml-warning, which issues non-fatal warning messages. As an alternative you can use laml-error which provides for fatal error messaging. Both of these accept an arbitrary number of parameters, which are string converted prior to string appending them. ") (form "(xml-check-error . messages)") (title "xml-check-error") (cross-references (reference "Scheme source file" "xml-check-error" "xml-in-laml-ep/xml-in-laml-1.html#xml-check-error") (internal-references "default value" "display-xml-warning") (reference "alternative value" "laml-error" "../../man/general.html#laml-error")) (examples)) ((kind "manual-section") (section-title "Rendering functions and procedures.") (section-body "The functions and procedures in this section transform the internal document representation (abstract syntax trees) to a textual form (text strings) which can be delivered in various ways (as strings or in streams). Both pretty printed and non pretty printed renderings are supported. In the start of the section we document a couple of variable that controls aspects of the ") (section-id "rendering")) ((cross-references (reference "Scheme source file" "compact-end-tag-rendering?" "xml-in-laml-ep/xml-in-laml-1.html#compact-end-tag-rendering?")) (kind "manual-page") (description "A boolean variable that controls how end tags are rendered when pretty printing is applied. If the value of the variable is true (#t) there will be no newline character and no indentation in front of an end tag. Use of the value true implies that a number of end tags will follow each other on the same line, and immediately after the element contents. This is not a nice pretty printing, but it is necessary to obtain a correct rendering in most browsers. If the value of the variable is false (#f) the end tag will be nicely aligned with the start tag. We recommend the value false (#f) because most browsers leaves a trace of white space before end tags. The default value is false (#f). ") (title "compact-end-tag-rendering?") (form compact-end-tag-rendering?) (examples)) ((cross-references (reference "Scheme source file" "use-empty-tags-for-elements-without-contents" "xml-in-laml-ep/xml-in-laml-1.html#use-empty-tags-for-elements-without-contents")) (kind "manual-page") (description "A boolean variable that controls how elements without contents are rendered. If the value of the variable is true (#t) always use the empty element tag for elements that happen to have no contents. If the value of the variable is false (#f), only use the empty element tag for elements that are statically declared to be empty. For reasons of interoperability with old browsers we recommend the value false (#f). The default value is false (#f). ") (title "use-empty-tags-for-elements-without-contents") (form use-empty-tags-for-elements-without-contents) (examples)) ((kind "manual-page") (parameters (parameter "xml-clause" "an AST") (parameter "output-port" "an open output port") (parameter "prolog" "The symbol prolog, in which case (standard-prolog) is inserted, or a prolog string to be inserted") (parameter "epilog" "The symbol epilog in which case (standard-epilog) is inserted, or a epilog string to be inserted")) (description "Render the XML clause (an AST) to output-port. output-port is assumed to be open. output-port will not be closed by this procedure. ") (form "(render-to-output xml-clause output-port [prolog epilog])") (title "render-to-output-port") (cross-references (reference "Scheme source file" "render-to-output-port" "xml-in-laml-ep/xml-in-laml-1.html#render-to-output-port") (reference "standard-prolog" "laml.scm" "../../../man/laml.html#standard-prolog") (reference "standard-epilog" "laml.scm" "../../../man/laml.html#standard-epilog")) (examples)) ((kind "manual-page") (parameters (parameter "xml-clause" "an AST") (parameter "output-port" "an open output port") (parameter "prolog" "The symbol prolog, in which case (standard-prolog) is inserted, or a prolog string to be inserted") (parameter "epilog" "The symbol epilog in which case (standard-epilog) is inserted, or a epilog string to be inserted")) (description "Pretty print the XML clause (an AST) to output-port. output-port is assumed to be open. output-port will not be closed by this procedure. The constants preferred-maximum-width and indentation-delta affect the pretty printing. ") (form "(pretty-render-to-output-port xml-clause output-port [prolog epilog])") (title "pretty-render-to-output-port") (cross-references (reference "Scheme source file" "pretty-render-to-output-port" "xml-in-laml-ep/xml-in-laml-1.html#pretty-render-to-output-port") (reference "standard-prolog" "laml.scm" "../../../man/laml.html#standard-prolog") (reference "standard-epilog" "laml.scm" "../../../man/laml.html#standard-epilog")) (examples)) ((cross-references (reference "Scheme source file" "render-start-tag-to-output-port" "xml-in-laml-ep/xml-in-laml-1.html#render-start-tag-to-output-port")) (kind "manual-page") (parameters (parameter "xml-clause" "an AST") (parameter "output-port" "an open output port")) (description "Render the start-tag of xml-clause (a LAML AST) to output-port. With this function, only the start tag and the attributes of the top-level element is rendered to the port. This function is primarily useful for stepwise imperative processing of an XML document. ") (title "render-start-tag-to-output-port") (form (render-start-tag-to-output-port xml-clause output-port)) (examples)) ((cross-references (reference "Scheme source file" "render-end-tag-to-output-port" "xml-in-laml-ep/xml-in-laml-1.html#render-end-tag-to-output-port")) (kind "manual-page") (parameters (parameter "xml-clause" "an AST") (parameter "output-port" "an open output port")) (description "Render the end-tag of xml-clause (a LAML AST) and return the rendered string. With this function, only the end tag of the top-level element is rendered to the port. This function is primarily useful for stepwise imperative processing of an XML document. ") (title "render-end-tag-to-output-port") (form (render-end-tag-to-output-port xml-clause output-port)) (examples)) ((cross-references (reference "Scheme source file" "xml-render" "xml-in-laml-ep/xml-in-laml-1.html#xml-render")) (kind "manual-page") (parameters (parameter "xml-clause" "an AST") (parameter "prolog" "The symbol prolog, in which case (standard-prolog) is inserted, or a prolog string to be inserted") (parameter "epilog" "The symbol epilog in which case (standard-epilog) is inserted, or a epilog string to be inserted")) (description "Render the xml-clause (a LAML AST) and return the rendered string. In this context, rendering means linearization of the AST to its textual form. ") (form "(xml-render xml-clause [prolog epilog])") (title "xml-render") (examples)) ((cross-references (reference "Scheme source file" "pretty-xml-render" "xml-in-laml-ep/xml-in-laml-1.html#pretty-xml-render")) (kind "manual-page") (parameters (parameter "xml-clause" "an AST") (parameter "prolog" "The symbol prolog, in which case (standard-prolog) is inserted, or a prolog string to be inserted") (parameter "epilog" "The symbol epilog in which case (standard-epilog) is inserted, or a epilog string to be inserted")) (description "Pretty print xml-clause (a LAML AST) and return the rendered string. In this context, rendering means linearization of the AST to its textual, pretty printed form. The constants preferred-maximum-width and indentation-delta affect the pretty printing. ") (form "(pretty-xml-render xml-clause [prolog epilog])") (title "pretty-xml-render") (examples)) ((cross-references (reference "Scheme source file" "start-tag-of" "xml-in-laml-ep/xml-in-laml-1.html#start-tag-of")) (kind "manual-page") (description "Render the start-tag of xml-clause (a LAML AST) and return the rendered string. With this function, only the start tag and the attributes of the top-level element is rendered and returned. This function is primarily useful for stepwise imperative processing of an XML document. ") (title "start-tag-of") (form (start-tag-of xml-clause)) (examples)) ((cross-references (reference "Scheme source file" "end-tag-of" "xml-in-laml-ep/xml-in-laml-1.html#end-tag-of")) (kind "manual-page") (description "Render the end-tag of xml-clause (a LAML AST) and return the rendered string. With this function, only the end tag of the top-level element is rendered and returned. This function is primarily useful for stepwise imperative processing of an XML document. ") (title "end-tag-of") (form (end-tag-of xml-clause)) (examples)) ((kind "manual-page") (parameters (parameter "contents" "An AST, textual contents (a string) (and others), or a list of such content items.")) (description "An rendering function which delivers a source-like Scheme expression as result (as a text string). Can be used for error message purposes, and other purposes as well. This function is slow due to use of heavy recursive string concatenation. See the faster alternative referred below. If you write the resulting string to a file, with write-text-file, it is often useful to pretty-print this file with scheme-pp. ") (form "(xml-render-as-laml contents)") (returns "A text string.") (misc "This function actually accepts an optional parameter, which we do not document.") (title "xml-render-as-laml") (cross-references (reference "Scheme source file" "xml-render-as-laml" "xml-in-laml-ep/xml-in-laml-1.html#xml-render-as-laml") (internal-references "Faster alternative" "render-as-laml-string") (internal-references "Output port alternative" "render-as-laml-to-output-port") (reference "Writing text string to file" "write-text-file" "../../../lib/man/file-read.html#write-text-file") (reference "Useful post processing function" "scheme-pp" "../../../man/laml.html#scheme-pp")) (examples)) ((kind "manual-page") (parameters (parameter "xml-clause" "an AST") (parameter "output-port" "an open output port") (parameter "prolog" "a prolog string to be inserted (a prefix)") (parameter "epilog" "an epilog string to be inserted (a suffix)")) (description "Render the XML clause (an AST) as a (non-pretty printed) LAML source text to output-port. output-port is assumed to be open. output-port will not be closed by this procedure. As of June 2007, this function is still experimental. Some aspects of the AST may not yet be handled correctly. ") (form "(render-as-laml-to-output xml-clause output-port)") (title "render-as-laml-to-output-port") (cross-references (reference "Scheme source file" "render-as-laml-to-output-port" "xml-in-laml-ep/xml-in-laml-1.html#render-as-laml-to-output-port") (internal-references "A variant that returns a string" "render-as-laml-string")) (examples)) ((kind "manual-page") (parameters (parameter "xml-clause" "an AST") (parameter "prolog" "A prolog string to be inserted") (parameter "epilog" "An epilog string to be inserted")) (description "Render the xml-clause (a LAML AST) as a (non-pretty printed) LAML source text to output-port and return the rendered string. As of June 2007, this function is still experimental. Some aspects of the AST may not yet be handled correctly. ") (form "(render-as-laml-new xml-clause [prolog epilog])") (title "render-as-laml-string") (cross-references (reference "Scheme source file" "render-as-laml-string" "xml-in-laml-ep/xml-in-laml-1.html#render-as-laml-string") (internal-references "A much slower version" "xml-render-as-laml") (internal-references "A variant that renders to port" "render-as-laml-to-output-port")) (examples)) ((cross-references (reference "Scheme source file" "xml-render-as-simple-text" "xml-in-laml-ep/xml-in-laml-1.html#xml-render-as-simple-text")) (kind "manual-page") (parameters (parameter "contents" "An AST, textual contents (a string, CDATA), char-ref, etc, and a list of such content items.")) (description "Pure textual rendering of contents. Strips all markup. Suppress all superfluous white spacing. No formatting is provided at all. ") (returns "a text string without markup and without any formatting.") (title "xml-render-as-simple-text") (form (xml-render-as-simple-text contents)) (examples)) ((kind "manual-section") (section-title "Element related functions.") (section-body "This section contains (mostly) higher-order functions that are related to the mirrors of the XML elements. ") (section-id "element-mod")) ((kind "manual-page") (description "Bind some attributes content elements of element (the first parameter) and return a new, 'modified element function'. With this, some attributes and some content elements are pre-bound to certain values in the modified element. The parameter attributes-and-contents is of the same form as the parameters to a LAML surface mirror functions. In fact, attributes-and-contents is appended to the actual parameters, which are passed to the modified element function. ") (returns "an attribute-modified mirror function") (title "xml-modify-element") (form (xml-modify-element element . attributes-and-contents)) (cross-references (reference "Scheme source file" "xml-modify-element" "xml-in-laml-ep/xml-in-laml-1.html#xml-modify-element") (internal-references "similar function" "xml-modify-element-prepend")) (examples (example "(define a-main (modify-element a 'target \"main\"))"))) ((kind "manual-page") (description "A function similar to xml-modify-element, but instead of appending attributes-and-contents to the actual parameters of the modified function, it prepends attributes-and-contents. ") (title "xml-modify-element-prepend") (form (xml-modify-element-prepend element . attributes-and-contents)) (cross-references (reference "Scheme source file" "xml-modify-element-prepend" "xml-in-laml-ep/xml-in-laml-1.html#xml-modify-element-prepend") (internal-references "similar function" "xml-modify-element")) (examples)) ((kind "manual-section") (section-title "XML in LAML abstraction functions.") (section-body "The functions in this category are higher-order functions which generate functions that obey XML-in-LAML parameter passing rules. In other words, the function that are generated use the same parameter conventions as the mirror functions of the HTML and XML elements. The most useful function is xml-in-laml-abstraction. xml-in-laml-positional-abstraction is a generalized version of xml-in-laml-abstraction. The function xml-in-laml-parametrization is only useful if you want to interface between XML-in-LAML parameter passing rules and a function with simple, conventional, positional parameter passing. ") (section-id "abstraction-fu")) ((kind "manual-page") (parameters (parameter "f" "A transformer function of two parameters - contents and the attribute property list. The generated function returns the value of f applied on contents and attributes.") (parameter "parameter-validator!" "A checking procedure of two parameters - contents and the attribute property list. Must report errors explicitly by xml-check-error. Defaults to a validator that always returns #t.") (parameter "f-name" "The name of the abstraction - used for error message purposes only. A string.") (parameter "language" "The name of the XML language to which the generated xml-in-laml abstraction belongs. If you wish the most precise warnings or error messages you should pass this parameter. A symbol.")) (description "Generate a function with XML-in-LAML parameter passing rules, which passes its contents to the first parameter of f, and its attributes to the second parameter of f. The function f can call and XML-in-LAML mirror function, or another XML-in-LAML abstraction. ") (form "(xml-in-laml-abstraction f [parameter-validator! f-name language])") (misc "See the LAML tutorial referenced above for additional discussion and examples. ") (title "xml-in-laml-abstraction") (cross-references (reference "Scheme source file" "xml-in-laml-abstraction" "xml-in-laml-ep/xml-in-laml-1.html#xml-in-laml-abstraction") (internal-references "internally applied function" "xml-sort-superficially-tag-parameters") (internal-references "similar function" "xml-in-laml-parametrization") (internal-references "generalized function" "xml-in-laml-positional-abstraction") (internal-references "useful par. validator" "required-implied-attributes") (reference "LAML tutorial" "Web authoring with higher-order functions" "../../../tutorial/higher-order-authoring/html/index.html")) (examples)) ((kind "manual-page") (parameters (parameter "n" "The number of positional parameters before the XML-in-LAML parameter section.") (parameter "m" "The number of positional parameters after the XML-in-LAML parameter section.") (parameter "f" "A transformer function of n + 2 + m parameters. The two parameters in the middle are the contents and the attributes. The generated function returns the value of f applied on contents and attributes together with the positional parameters.") (parameter "parameter-validator!" "A checking procedure of two parameters - contents and the attribute property list. Must report errors explicitly by xml-check-error. Cannot validate the positional parameters.") (parameter "f-name" "The name of the abstraction - used for error message purposes only.") (parameter "language" "The name of the XML language to which the generated xml-in-laml abstraction belongs. If you wish the most precise warnings or error messages you should pass this parameter. A symbol.")) (description "Generate a function with XML-in-LAML parameter passing rules, together with a number of required parameters before and after the XML-in-LAML parameters. ") (form "(xml-in-laml-positional-abstraction n m f [parameter-validator! f-name language])") (pre-condition "n + m is less than or equal to the length of parameterlist of the generated function. (Condition checked by this function).") (title "xml-in-laml-positional-abstraction") (cross-references (reference "Scheme source file" "xml-in-laml-positional-abstraction" "xml-in-laml-ep/xml-in-laml-1.html#xml-in-laml-positional-abstraction") (internal-references "specialized function" "xml-in-laml-abstraction") (internal-references "useful par. validator" "required-implied-attributes")) (examples)) ((kind "manual-page") (parameters (parameter "f" "An 'old style' fuction web function with positional parameters. Is applied on the result of parameter-mediator.") (parameter "parameter-mediator" "a function of two parameters (contents-list and attribute property list) which transforms the new style parameters to the old style. f is applied on the output of parameter-mediator!") (parameter "parameter-validator!" "a procedure of two parameters (contents-list and attribute property list) which validates the input of the generated function.") (parameter "f-name" "The name of the generated function. Solely used for error message purposes.") (parameter "language" "The name of the XML language to which the generated xml-in-laml parametrization belongs. ")) (description "Generate a function with XML-in-LAML parameter passing rules which sends its input to an ordinary function, f, with positional parameters via a parameter mediator. The first parameter, f, is typically a web-related function with positional parameter correspondence (such as an existing, old-style 'conveninece function'). The parameter parameter-mediator is a function that generates a parameter list for f from content-list and the attributes property list, which is produced by the function xml-sort-tag-parameters. Thus, the parameter-mediator function translates the 'new parameter profile' to the 'old one', which is associated with f. The optional procedure parameter-validator! validates the contents-list and the attribute-list by reporting problems via xml-check-error. The optional f-name parameter is a string corresponding to the name of f (used for error message purposes only). ") (form "(xml-in-laml-parametrization f parameter-mediator [parameter-validator! f-name language])") (misc "See the LAML tutorial referenced above for additional discussion and examples.") (title "xml-in-laml-parametrization") (cross-references (reference "Scheme source file" "xml-in-laml-parametrization" "xml-in-laml-ep/xml-in-laml-1.html#xml-in-laml-parametrization") (internal-references "applied function" "xml-sort-tag-parameters") (internal-references "similar function" "xml-in-laml-abstraction") (internal-references "useful par. validator" "required-implied-attributes") (reference "LAML tutorial" "Web authoring with higher-order functions" "../../../tutorial/higher-order-authoring/html/index.html")) (examples)) ((kind "manual-page") (parameters (parameter "required-attribute-names" "A list of attribute names (symbols) which are required.") (parameter "implied-attribute-names" "A list of additional attribute names (symbols) which are allowed, or the list (*) - a singleton list with the symbol * - in the meaning of any attribute.")) (description "A higher-order function which returns an attribute checker. Report problems via xml-check-error. Check that all required-attribute-names are present and that the actual attributes are covered by required-attribute-names and implied-attribute-names together. The generated functions can be used as parameter valdiator procedures in xml-in-laml-abstraction and xml-in-laml-parametrization ") (form "(required-implied-attributes required-attribute-names implied-attribute-names [tag-name])") (title "required-implied-attributes") (cross-references (reference "Scheme source file" "required-implied-attributes" "xml-in-laml-ep/xml-in-laml-1.html#required-implied-attributes") (internal-references "relevant context of use" "xml-in-laml-abstraction" "xml-in-laml-parametrization") (internal-references "error function" "xml-check-error")) (examples)) ((kind "manual-section") (section-title "AST traversal and AST transformation functions.") (section-body "The AST traversal functions extract information from AST by means of traversal and searching. The \"find\" functions use guided search, aided by the XML navigation information which is derived from the XML DTD. The \"traverse-and-collect\" functions are slightly more general (with a node-interesting? predicate), but they do not (and cannot) make use of the XML navigation information. Thus, these function do an exhaustive search. The \"find\" and \"transverse-and-collect\" functions in this section constitute a 'minimalistic transformation framework' in LAML, which is useful for target-controlled transformation of an AST. The function transform-ast is useful for comprehensive, recursive, source-controlled transformation of an AST (similar to a typical use of XSLT). The following section contains more sophisticated locator functions. ") (section-id "ast-transf")) ((kind "manual-page") (parameters (parameter "ast" "An AST.") (parameter "el-name" "A name of an element in the language of ast (a string or symbol).") (parameter "ast-transformer" "An optional AST transformation function, which defaults to the identity function id-1.")) (description "Find and return a list of transformed sub ASTs of ast (first parameter) each with a root element of name el-name. The search is guided by the XML navigation information, hereby pruning the tree traversal. The AST is traversed in pre-order. The transformation of the resulting sub-ASTS is done by the optional ast-transformer. If a sub-ast is returned as a part of the result then the sub-ast is not searched internally for recursive matches. ") (form "(find-asts ast el-name [ast-transformer])") (returns "A list of transformed ASTs.") (title "find-asts") (cross-references (reference "Scheme source file" "find-asts" "xml-in-laml-ep/xml-in-laml-1.html#find-asts") (internal-references "similar function" "traverse-and-collect-all-from-ast" "traverse-and-collect-first-from-ast" "find-first-ast") (internal-references "related functions" "traverse-and-collect-first-from-ast" "find-first-ast")) (examples)) ((kind "manual-page") (parameters (parameter "ast" "An AST.") (parameter "el-name" "A name of an element in the language of ast (a string or symbol).") (parameter "ast-transformer" "An optional AST transformation function, which defaults to the identity function id-1.")) (description "Find and return a sub-AST of ast (first parameter) with a root element of name el-name. The search is guided by the XML navigation information, hereby pruning the tree traversal. The AST is traversed in pre-order. When an appropriate sub-AST is found, the search is terminated. The transformation of the resulting sub-ASTS is done by the optional ast-transformer. ") (form "(find-first-ast ast el-name [ast-transformer])") (returns "A transformed AST, or #f") (title "find-first-ast") (cross-references (reference "Scheme source file" "find-first-ast" "xml-in-laml-ep/xml-in-laml-1.html#find-first-ast") (internal-references "similar function" "traverse-and-collect-first-from-ast") (internal-references "related functions" "traverse-and-collect-all-from-ast" "find-asts")) (examples)) ((kind "manual-page") (parameters (parameter "ast" "The AST in which to look for the attribute") (parameter "name" "The name of the attribute (symbol or string)") (parameter "default-attribute-value" "The default value, used if no attribute of name is found, but only if it is allowed to occur. A string.")) (description "Return the value of the attribute name in ast, or in one of the subtrees of ast. If, from a static consideration, the attribute is not unique in ast, a fatal error occurs. The default attribute value is only applied if the attribute could occur, but if it does NOT in the actual AST. This function is useful for extraction of deep attributes given the fact that they only can occur once in the document, according to both the actual document structure and the statically extracted XML navigation information. The navigation towards a deep, unique attribute is efficient. ") (form "(unique-ast-attribute ast name [default-attribute-value])") (pre-condition "Statically, only one occurence of attr-name can appear in ast.") (title "unique-ast-attribute") (cross-references (reference "Scheme source file" "unique-ast-attribute" "xml-in-laml-ep/xml-in-laml-1.html#unique-ast-attribute") (internal-references "related function" "ast-attribute")) (examples)) ((kind "manual-page") (parameters (parameter "ast-tree" "The AST to be traversed. May also be a content list (such as a list of ASTs) as returned by the function ast-subtrees.") (parameter "node-interesting?" "The AST predicate that identifies the ASTs of interest.") (parameter "ast-transformer" "The function which is applied on the ASTs identified by node-interesting?")) (description "Traverse all nodes of the AST ast-tree, and return transformed subtrees that satisfy the node-interesting? predicate. No traversal takes place inside subtrees that sastify the node-interesting? predicate. The transformation of the interesting subtree is done with ast-transformer (the third parameter). Non-AST constituents of the AST (CDATA and white space markers) are not visited during the traversal, and delayed procedural content items are not taken into account. The traversal is done in pre-order. ") (returns "The mapping of the function ast-transformer on the list of interesting subtrees.") (misc "The higher-order function ast-of-type? generates useful node-interesting? functions.") (title "traverse-and-collect-all-from-ast") (form (traverse-and-collect-all-from-ast ast-tree node-interesting? ast-transformer)) (cross-references (reference "Scheme source file" "traverse-and-collect-all-from-ast" "xml-in-laml-ep/xml-in-laml-1.html#traverse-and-collect-all-from-ast") (internal-references "useful as parameter" "ast-of-type?") (internal-references "sibling function" "traverse-and-collect-first-from-ast") (internal-references "similar function" "find-asts")) (examples)) ((kind "manual-page") (parameters (parameter "ast-tree" "The AST to be traversed. May also be a content list (such as a list of ASTs) as returned by the function ast-subtrees.") (parameter "node-interesting?" "The AST predicate that identifies the ASTs of interest.") (parameter "ast-transformer" "The function which is applied on the ASTs identified by node-interesting?")) (description "Traverse the AST ast-tree, and return a transformation of the first subtree which satisfies the predicate node-interesting. The transformation of the interesting subtree is done with ast-transformer (the third parameter). Non-AST constituents of the AST (CDATA and white space markers) are not visited during the traversal. The traversal is done in pre-order. Return #f in case no match is found. In fact, return the transformed AST, applying ast-transformer on the returned tree. ") (returns "(ast-transformer TR), where TR is the first encounted tree matched by node-interesting? or #f if no tree is matched.") (misc "The higher-order function ast-of-type? generates useful node-interesting? functions.") (title "traverse-and-collect-first-from-ast") (form (traverse-and-collect-first-from-ast ast-tree node-interesting? ast-transformer)) (cross-references (reference "Scheme source file" "traverse-and-collect-first-from-ast" "xml-in-laml-ep/xml-in-laml-1.html#traverse-and-collect-first-from-ast") (internal-references "useful as parameter" "ast-of-type?") (internal-references "sibling function" "traverse-and-collect-all-from-ast") (internal-references "similar function" "find-first-ast")) (examples)) ((kind "manual-page") (parameters (parameter "source-items" "A content item, a list of content items. This can be an AST, or a list of ASTs. It can also be CDATA (a text string or a list of text strings).") (parameter "transform-spec" "A list of transformation specifications. Each transformation specification is itself a list of length 2: (input-predicate transformation-function).")) (description "Transform source item(s) by means of transform-specs. The first applicable transformation in transform-specs is applied. Applies the function positive-to-negative-ast-spacing on any AST before the transformation process. Recursive transformations, initiated in the transformation functions of transform-specs, should be done by means of the function apply-transformation-on. ") (pre-condition "ASTs in source are positive spaced. At least one transformation in the transform-spec MUST be applicable.") (returns "The transformed source (such as an AST or a list of ASTs).") (misc "Notice that it is up to the transformation specifications to decide if recursive transformation is done. Organize transformation-spec with the most specialized transformations first, and the most general transformations last. Be sure that at least one transformation is applicable. It is possible to to ignore 'non-matched source items' by having (list (lambda (x) #t) (lambda (source) '())) as the last element in the transformation specification.") (title "transform-ast") (form (transform-ast transform-specs source-items)) (cross-references (reference "Scheme source file" "transform-ast" "xml-in-laml-ep/xml-in-laml-1.html#transform-ast") (internal-references "recursive transformation" "apply-transformation-on") (internal-references "applied function" "positive-to-negative-ast-spacing")) (examples)) ((kind "manual-page") (parameters (parameter "source-items" "A content item, a list of content items. This includes an AST, and a list of ASTs. ")) (description "Do recursive transformation on a content source item, or a list of content source items (such as an AST, or a list of ASTs). At top level, always apply the function transform-ast. Within the transformation functions (of a transform-specs of transform-ast) perform recursive transformations by apply-transformation-on. This function uses the same transformation specification as the original call of transform-ast. ") (form "(apply-transformation-on source-items)") (title "apply-transformation-on") (cross-references (reference "Scheme source file" "apply-transformation-on" "xml-in-laml-ep/xml-in-laml-1.html#apply-transformation-on") (internal-references "top-level transformation" "transform-ast")) (examples)) ((kind "manual-page") (parameters (parameter "input-list" "Each element in input-list can be an AST, a string, a character reference, or a white space related marker") (parameter "transform-spec" "A list of transformation specifications, each of which is a list of length 2: (input-predicate transformation-function)")) (description "Apply the transformation-specs on input-list and return a list of transformed input elements. This function can, for instance, be applied on the subtree list of an AST. A single transformation spec is a list of two element: A predicate and a transformation function. A transformation function is applied if the corresponding predicate holds on the input element. If no predicate holds on an input element, the input element is returned (not copied) without being transformed. No recursive transformations are done by this function. ") (returns "A list of the same length of input-list. Some elements in the returned list are transformed as requested by transform-spec.") (misc "This is an older, ad-hoc transformation function. I recommend that you use the function transform-ast instead.") (title "transform-ast-list") (form (transform-ast-list input-list . transform-specs)) (cross-references (reference "Scheme source file" "transform-ast-list" "xml-in-laml-ep/xml-in-laml-1.html#transform-ast-list") (internal-references "similar, and better function" "transform-ast") (internal-references "related functions" "traverse-and-collect-all-from-ast" "traverse-and-collect-first-from-ast") (internal-references "usefully applied on results of" "ast-subtrees" "traverse-and-collect-all-from-ast") (internal-references "useful predicate generator" "ast-of-type?")) (examples)) ((cross-references (reference "Scheme source file" "positive-to-negative-ast-spacing" "xml-in-laml-ep/xml-in-laml-1.html#positive-to-negative-ast-spacing")) (kind "manual-page") (description "Given an AST with positive white spacing (such as an AST returned by mirror function). Thus, the input AST may hold a number of explicit-space values (#t values), but no explicit-space-suppress values (no #f values). Return a copy of the AST with negative white spacing, akin to the source forms of the mirror functions. Thus, the output AST may hold a number of explicit-space-suppress values (#f values), but no explicit-space values (no #t values) ") (title "positive-to-negative-ast-spacing") (form (positive-to-negative-ast-spacing ast)) (examples)) ((kind "manual-section") (section-title "LAML location path and steps.") (section-body " This section contains <a href = \"http://www.w3.org/TR/xpath.html\">Xpath</a> inspirred matching, extraction, and transformation functions. The definitions in this section make up an alternative to the minimalistic AST traversal and transformation functions in the previous section. Eventually, there will be additional documentation and examples of the LAML location path framework. ") (section-id "location-path-step")) ((kind "manual-page") (parameters (parameter "ast" "A single AST that represents a single XML document.") (parameter "locator-list" "is a list of AST locator functions. Each such function works on a single content element (an AST for instance) and it returns a list of content elements. (For convenience, it is also possible to return a single contents element, which automatically is nested into a list). The function location-step is the primary generator of locator-path functions.")) (description "Apply each function in locator-list sequentially on the list of ASTs resulting from previous location step. Flatten the resulting lists, and ensure that a given content element is at most returned once. A locator function is a function from content element (such as an AST) to a single content element, or (more typcially) to a list of content elements. A locator function may, in fact, perform some tranformation on the list of content elements. This function sets the variable xml-root-node to ast, if the variable is not already assigned explitly. If this function assigns xml-root-node, it also resets xml-root-node to value #f afterwards. ") (returns "A list of content elements (ASTs, for instance).") (title "match-ast") (form (match-ast ast . locator-list)) (cross-references (reference "Scheme source file" "match-ast" "xml-in-laml-ep/xml-in-laml-1.html#match-ast") (internal-references "locator path generation function" "location-step")) (examples)) ((cross-references (reference "Scheme source file" "xml-root-node" "xml-in-laml-ep/xml-in-laml-1.html#xml-root-node")) (kind "manual-page") (description "The XML root node, used to determine some of the reverse axes. It is possible to assign xml-root-node explicitly via set!. If you set xml-root-node explicitly, remember to reset its value to #f when you are done. ") (title "xml-root-node") (form xml-root-node) (examples)) ((cross-references (reference "Scheme source file" "location-step" "xml-in-laml-ep/xml-in-laml-1.html#location-step")) (kind "manual-page") (parameters (parameter "axis" "One of the axes self, child, descendant, attribute, following-sibling, preceding-sibling, following, preceding, ancestor, and parent (a symbol).") (parameter "node-test" "A node test which is relevant in the context of the axis. Typcically a name of an XML element, or an attribute name.") (parameter "filtering" "Some filtering applied realtive to axis and name. Typically a boolean function from (content-element node-position context-size). For the attribute axis, filtering may be a text string (the attribute value). ")) (description "Generates and returns a location step procedure for a given axis, name, and filtering. Use of the axes following-sibling, preceding-sibling, following, preceding, ancestor, and parent requires that the xml-root-node is assigned in advance. These axes correspond to the axes known from <a href = \"http://www.w3.org/TR/xpath.html\">Xpath</a>. ") (form "(location-step axis [node-test filtering])") (title "location-step") (examples)) ((cross-references (reference "Scheme source file" "negate-step" "xml-in-laml-ep/xml-in-laml-1.html#negate-step")) (kind "manual-page") (description "A higher-order function that negates a single location-step procedure. Negated steps are primarily useful in filtering contexts, because it is not possible to turn an empty result back to something useful. ") (title "negate-step") (form (negate-step location-step-procedure)) (examples)) ((cross-references (reference "Scheme source file" "and-steps" "xml-in-laml-ep/xml-in-laml-1.html#and-steps")) (kind "manual-page") (description "A higher-order function that conjuncts (ands) some location steps to a single location step. Does each location step in location-step-procedure-list succeed? Returns a boolean-like result: If yes, return (list #t), else return (). Only useful within the filtering position in a location step. ") (title "and-steps") (form (and-steps . location-step-procedure-list)) (examples)) ((cross-references (reference "Scheme source file" "or-steps" "xml-in-laml-ep/xml-in-laml-1.html#or-steps")) (kind "manual-page") (description "A higher-order function that disjuncts (ors) some location steps to a single location step. Does at least one location step in location-step-procedure-list succeed? Returns a boolean-like result: If yes, return (list #t), else return (). Only useful within the filtering position in a location step. ") (title "or-steps") (form (or-steps . location-step-procedure-list)) (examples)) ((cross-references (reference "Scheme source file" "compose-steps" "xml-in-laml-ep/xml-in-laml-1.html#compose-steps")) (kind "manual-page") (description "Compose the locatation steps in location-step-procedure-list to a single location step. Useful in contexts where only a single location step is allowed. ") (title "compose-steps") (form (compose-steps . location-step-procedure-list)) (examples)) ((cross-references (reference "Scheme source file" "identifier-of-predicate" "xml-in-laml-ep/xml-in-laml-1.html#identifier-of-predicate")) (kind "manual-page") (description "Return the identifier function of the predicate p. An identifier function returns x if p holds on x, else the it returns the empty list. Via this function, a predicate can act as a location step. ") (title "identifier-of-predicate") (form (identifier-of-predicate p)) (examples)) ((cross-references (reference "Scheme source file" "ast-text-containing" "xml-in-laml-ep/xml-in-laml-1.html#ast-text-containing")) (kind "manual-page") (description "Generates a location step that test if str is part of the immediate textual content. The generated procedure can be used as the last step in location path (a list of location steps). ") (title "ast-text-containing") (form (ast-text-containing str)) (examples)) ((cross-references (reference "Scheme source file" "ast-text-deep-containing" "xml-in-laml-ep/xml-in-laml-1.html#ast-text-deep-containing")) (kind "manual-page") (description "Generates a location step that tests if str is part of the deep textual content. The generated procedure can be used as the last step in location path (a list of location steps). ") (title "ast-text-deep-containing") (form (ast-text-deep-containing str)) (examples)) ((cross-references (reference "Scheme source file" "ast-node" "xml-in-laml-ep/xml-in-laml-1.html#ast-node")) (kind "manual-page") (description "Generates a location step that tests for x being a node. ") (title "ast-node") (form (ast-node)) (examples)) ((cross-references (reference "Scheme source file" "nt:last" "xml-in-laml-ep/xml-in-laml-1.html#nt:last")) (kind "manual-page") (description "A filtering function that tests if the node is the last in its context. Filtering functions are used in location steps. ") (title "nt:last") (form (nt:last)) (examples)) ((cross-references (reference "Scheme source file" "nt:child-number" "xml-in-laml-ep/xml-in-laml-1.html#nt:child-number")) (kind "manual-page") (description "A filtering function that tests if the node is number q in its context. Filtering functions are used in location steps. ") (title "nt:child-number") (form (nt:child-number q)) (examples)) ((cross-references (reference "Scheme source file" "nt:child-name" "xml-in-laml-ep/xml-in-laml-1.html#nt:child-name")) (kind "manual-page") (description "A filtering function that tests if the node has name. Filtering functions are used in location steps. ") (title "nt:child-name") (form (nt:child-name name)) (examples)) ((cross-references (reference "Scheme source file" "nt:attribute" "xml-in-laml-ep/xml-in-laml-1.html#nt:attribute")) (kind "manual-page") (description "A filtering function that tests if the node has an attribute name with the given value. Filtering functions are used in location steps. ") (title "nt:attribute") (form (nt:attribute name value)) (examples)) ((cross-references (reference "Scheme source file" "nt:for-which-predidate-holds" "xml-in-laml-ep/xml-in-laml-1.html#nt:for-which-predidate-holds")) (kind "manual-page") (description "A filtering function which applies a list of location steps on the node, a passes the results of these steps to the predicate pred. Operationally: Apply location steps on node in question (n), giving a list of results. Test if the result fulfills the predicate pred (which must be some list predicate). Filtering functions are used in location steps. ") (title "nt:for-which-predidate-holds") (form (nt:for-which-predidate-holds pred . location-steps)) (examples)) ((cross-references (reference "Scheme source file" "nt:for-which" "xml-in-laml-ep/xml-in-laml-1.html#nt:for-which")) (kind "manual-page") (description "A filtering function which test if the list of location steps leads success (leads to a non-empty result). Filtering functions are used in location steps. ") (title "nt:for-which") (form (nt:for-which . location-steps)) (examples)) ((kind "manual-section") (section-title "Element content models.") (section-body "The functions in this section make the content models of the XML elements available. As an example, this allows us to find out if an element is empty. The element content models are defined by the XML DTDs, and as such they are used for generation of the XML validation procedures. ") (section-id "content-models")) ((cross-references (reference "Scheme source file" "content-model-map-of" "xml-in-laml-ep/xml-in-laml-1.html#content-model-map-of")) (kind "manual-page") (description "Returns the content model map (an association list) of a given XML language. A content model map of an XML language is an sorted associative vector that maps element names (strings) to the parsed content models of the element, as provided by the the LAML XML-DTD parser. ") (title "content-model-map-of") (form (content-model-map-of language)) (examples)) ((cross-references (reference "Scheme source file" "content-model-of" "xml-in-laml-ep/xml-in-laml-1.html#content-model-of")) (kind "manual-page") (description "Return the content model of the element named element-name in XML language. The content model is the parsed content model, as delivered by the LAML XML-DTD parser. If the content model is not available for some reason (unknown element-name, unknown XML language) return #f. ") (title "content-model-of") (form (content-model-of element-name language)) (examples)) ((cross-references (reference "Scheme source file" "register-xml-in-laml-content-models" "xml-in-laml-ep/xml-in-laml-1.html#register-xml-in-laml-content-models")) (kind "manual-page") (description "Register the content model structure for XML language. This function is called \"automatically\" when the Scheme mirror of the XML language is loaded. ") (title "register-xml-in-laml-content-models") (form (register-xml-in-laml-content-models language content-model-structure)) (examples)) ((kind "manual-section") (section-title "Action procedure map.") (section-body " An action procedure map is a sorted associative vector that maps certain element names to action procedures. ") (section-id "action-procedures")) ((cross-references (reference "Scheme source file" "action-procedure-map-of" "xml-in-laml-ep/xml-in-laml-1.html#action-procedure-map-of")) (kind "manual-page") (description "Return the action procedure map of the XML language. ") (title "action-procedure-map-of") (form (action-procedure-map-of language)) (examples)) ((cross-references (reference "Scheme source file" "action-procedure-of-language" "xml-in-laml-ep/xml-in-laml-1.html#action-procedure-of-language")) (kind "manual-page") (description "Return the action procedure of the XML element named element-name in the XML language. If there is no action procedure associated with the element, or if the action procedure structure is not available for language, return #f. ") (title "action-procedure-of-language") (form (action-procedure-of-language element-name language)) (examples)) ((cross-references (reference "Scheme source file" "action-procedure-of-map" "xml-in-laml-ep/xml-in-laml-1.html#action-procedure-of-map")) (kind "manual-page") (description "Return the action procedure of the XML element named element-name relative to the action procedure map action-procedure-map. ") (title "action-procedure-of-map") (form (action-procedure-of-map element-name action-procedure-map)) (examples)) ((cross-references (reference "Scheme source file" "register-xml-in-laml-action-procedures" "xml-in-laml-ep/xml-in-laml-1.html#register-xml-in-laml-action-procedures")) (kind "manual-page") (description "Register the action procedure structure for XML language. An action procedure structure is a sorted, associative vector that maps XML elements (stings) to their action procedures. Notice that this is only a partial mapping. This function is called \"automatically\" when the Scheme mirror of the XML language is loaded. ") (title "register-xml-in-laml-action-procedures") (form (register-xml-in-laml-action-procedures language action-procedure-structure)) (examples)) ((kind "manual-page") (parameters (parameter "ast" "The internal representation of the document to be processed.") (parameter "given-language" "The language to which ast belongs. Bound at root level. Defaults to (ast-language ast). A symbol.") (parameter "action-map" "The action map that maps elements in the XML language to action procedure. Defaults to (action-procedure-map-of given-language). A sorted associative vector. ")) (description "Process the ast, the internal document representation, by means of the action procedures in action-map. The action map is a sorted associative vector that maps element names to action procedures. The default value of action-map is (action-procedure-map-of given-language). ") (form "(process-ast! ast [given-language action-map])") (title "process-ast!") (cross-references (reference "Scheme source file" "process-ast!" "xml-in-laml-ep/xml-in-laml-1.html#process-ast!") (internal-references "action procedure access" "action-procedure-map-of")) (examples)) ((kind "manual-section") (section-title "Expansion of delayed procedural content items.") (section-body "It is possible to embed a Scheme procedure (with a certain given signature) in an XML-in-LAML document. This allows for simple and direct handling of context-sensitive aspects of a document. The function expand-procedural-content-items-in-ast calls such procedures, hereby expanding the AST.")) ((cross-references (reference "Scheme source file" "expand-procedural-content-items-in-ast" "xml-in-laml-ep/xml-in-laml-1.html#expand-procedural-content-items-in-ast")) (kind "manual-page") (description "Expand all delayed procedural content items (recursively) inside the ast. Traverses the entire ast and looks for procedural content item constituents. Return an expanded AST (a copy of ast) in which procedural content elements have been activated and thereby expanded. If ast does not contain any delayed procedural content items, ast is just returned (without copying it). ") (title "expand-procedural-content-items-in-ast") (form (expand-procedural-content-items-in-ast ast)) (examples)) ((cross-references (reference "Scheme source file" "has-procedural-content-items-deep?" "xml-in-laml-ep/xml-in-laml-1.html#has-procedural-content-items-deep?")) (kind "manual-page") (description "Is there any procedure content items in ast. Traverses the entire ast if necessary. ") (title "has-procedural-content-items-deep?") (form (has-procedural-content-items-deep? ast)) (examples)) ((cross-references (reference "Scheme source file" "has-procedural-content-items?" "xml-in-laml-ep/xml-in-laml-1.html#has-procedural-content-items?")) (kind "manual-page") (description "Is there any procedure content items among the immediate constituents of x (usually an AST). No AST traversal is involved to find out. This function also work on a (flat) element content list x (of text, space, comment, CDATA etc). ") (title "has-procedural-content-items?") (form (has-procedural-content-items? x)) (examples)) ((kind "manual-section") (section-title "Other useful functions.") (section-body " In this section there are non-mirror functions which are useful in in the context of XML and LAML. ") (section-id "others-functions")) ((cross-references (reference "Scheme source file" "ast-to-parse-tree" "xml-in-laml-ep/xml-in-laml-1.html#ast-to-parse-tree")) (kind "manual-page") (description "Convert an abtract syntax tree to a parse tree. Abstract syntax trees are produced by the validating mirror functions. Parse trees are used as an internal format in the HTML and the XML pretty printing procedures. You can use the function pretty-print-html-parse-tree on the parse tree returned by ast-to-parse-tree. ") (pre-condition "The LAML tool html-support (for parsing and pretty printing) must be loaded for this function to work.") (misc "To load html-support: <kbd>(laml-tool-load \"xml-html-support/html-support.scm\")</kbd>") (title "ast-to-parse-tree") (form (ast-to-parse-tree ast)) (examples)))