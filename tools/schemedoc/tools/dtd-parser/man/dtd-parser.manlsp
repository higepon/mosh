(((title . "Reference Manual of the XML Document Type Definition Parser") (author (ast "span" ("Kurt Nørmark" #t " " #t (char-ref copy)) () double xhtml10-transitional ()) #t "normark@cs.aau.dk") (affiliation "Department of Computer Science," #t "Aalborg University," #t "Denmark.") (abstract . " This tool parses an XML Document Type Definition (DTD). The parsed result is represented as a flat list of element, attribute, and entity descriptors. <p> This version of the XML DTD parser also parses the content models of the XML elements. This is the basis for the fully automatic synthesis of finite state automata for validation of XML-in-LAML documents at document generation time.<p> Another tool - <a href=\"../../xml-in-laml/man/xml-in-laml.html\">the XML-in-LAML mirror generation tool</a> - is able to produce a Scheme mirror of the XML language. The mirror generation tool takes as input the data structures, which are produced by the DTD parser.<p> There is some <a href=\"http://www.cs.aau.dk/~normark/scheme/tools/dtd-parser/doc/dtd-parser.html\"> internal elucidative documentation</a> of the DTD parser at the LAML development site.<p> Please consult <a href = \"../../../tutorial/xml-in-laml/xml-in-laml.html\">\"XML mirrors in Scheme: XML in LAML\"</a> (section 2) for a tutorial introduction to the use of the parser.<p> The DTD parser is not perfect, but we steadily improve it when it is needed. See the README file in the directory of the source files for details and progress.<p> An earlier (and now obsolete) version of this tool was used to parse the HTML4.01 DTD (which is a non-XML DTD). ") (scheme-source-file . "/user/normark/scheme/tools/dtd-parser/dtd-parser-4.scm/") (laml-resource . "true") (documentation-commenting-style . not-provided) (default-attribute-explanation . not-provided) (source-destination-delta . not-provided) (css-prestylesheet . "compact") (css-stylesheet . "argentina") (css-stylesheet-copying . "true") (make-dtd-manual-template . not-provided) (keep-syntactical-comment-file . not-provided) (manual-destination-name . not-provided) (mirror-names-defined . not-provided) (mirror-name-prefix . not-provided) (attribute-sorting . not-provided) (scheme-source-linking . not-provided)) ((kind "manual-section") (section-title "Introduction and usage.") (section-body "The easiest way to parse an XML DTD is to use the procedure <a href=\"../../../man/laml.html#xml-dtd-parse\">xml-dtd-parse</a> located in laml.scm in the root of LAML distribution. This procedure can be called from a LAML prompt.<p> Here is another slightly more low-level way to use the parser. <ol> <li> Start a Scheme interpreter, such as SCM or MzScheme. <li> Define the variable laml-dir to the LAML directory path on your computer. <li> Load this file (dtd-parser-4.scm in tools/dtd-parser) into a Scheme interpreter, for instance from the directory in which the dtd-parser.scm source file resides. <li> Call the function (parse-dtd \"dtd-file-without-extension\"). Additional parameters of parse-dtd are interpreted as non-expanding entities. A call of the function will give you a similar Lisp parsed file with lsp extension. In addition the variables element-list, attribute-list, and entity-list will be defined by the parser. The resulting file contains a \"flat\" concatenation of these three lists. </ol> We now describe the format of an entity, an attribute, and an element in the parsed result. Each unit in the result of the parsing is either an element, an attribute, or an entity. An element describes, in popular terms, \"a single tag\" in the markup language. An attribute describes the attribute of an element. Thus, in general, there is a one-to-one correspondance between the element list and the attribute-list. The list of entities are macro expansions, which have been applied to achieve a clean and parsable dtd file. The entity list is of minor importance once the file has been parsed.<p> The first element in each of the top level form of the parsed result distinguishes this element from each others (tagging).<p> <ul> <li> Element format: <br> (element name start-tag-status end-tag-status content-model comment)<p> </ul> The start-tag-status and end-tag-status are left overs from SGML and HTML4, see <a href=\"http://www.w3.org/TR/html401/intro/sgmltut.html#h-3.3\">the HTML4.01 definition</a>. These two status fields are not used for XML. The content model is a symbol (any or empty) or a list prefixed with either mixed-content or element-content.<p> Mixed contents list have the form <pre> (mixed-content pcdata) (mixed-content (choice zero-or-more pcdata NAME-STRING NAME-STRING ... NAME-STRING)) </pre> Element contents lists have the form <pre> (element-contents CONT) </pre> where <p> CONT ::= ( KIND MULTIPLICITY DATA+ ) <br> KIND ::= name | seq | choice | empty <br> MULTIPLICITY ::= one | optional | zero-or-more | one-or-more <br> DATA ::= NAME-STRING | CONT <p> and where NAME-STRING is a placeholder for a string constant.<p> Here is information about the parsed formats of attributes and entities: <ul> <li> Attribute format: <br> (attribute name list-of-attribute-triples). <br> An attribute triple consist of attribute name, attribute type (most basic type, no entities), and \"availability status\".<p> <li> Entity name: <br> (entity name entity-expansion). </ul> ")) ((kind "manual-section") (section-title "The main parsing function.") (section-body "There is only one function, parse-dtd, to learn. This function represents and \"is\" the tool.")) ((kind "manual-page") (description "Parses a dtd file to Lisp expressions and writes the parsed result to another file. The parameter file is without extension. The second parameter is a list of entity names (strings without leading percent chars); no entity in the list will be expanded. This function also defines the lists element-list, attribute-list, and entity-list. The parsed result is the appending of element-list, attribute-list, and entity-list. It is assumed that the DTD file resides on file.dtd. This function writes the result to the file.lsp. ") (title "parse-dtd") (form (parse-dtd file . non-expanding-entities))) ((kind "manual-section") (section-title "Variables which control the parser.") (section-body "")) ((kind "manual-page") (description "A boolean variable which controls whether the parser should report on the progress while parsing. Default #t. ") (title "dtd-parse-verbose") (form dtd-parse-verbose)) ((kind "manual-page") (description "A boolean variable which controls whether to parse ignored marked sections anyway. Default #t. ") (title "forced-inclusion-of-marked-sections") (form forced-inclusion-of-marked-sections)) ((kind "manual-section") (section-title "Variables which is assigned to parser output.") (section-body "")) ((kind "manual-page") (description "A list of entities defined by the parser ") (title "entity-list") (form entity-list)) ((kind "manual-page") (description "A list of elements defined by the parser ") (title "element-list") (form element-list)) ((kind "manual-page") (description "A list of attributes defined by the parser ") (title "attribute-list") (form attribute-list)) ((kind "manual-page") (description "A list of notations defined by the parser ") (title "notation-list") (form notation-list)) ((kind "manual-page") (description "Top level rhs parser function. ") (title "parse-rhs-string") (form (parse-rhs-string rhs-str))))