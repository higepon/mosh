(((title . "Reference Manual of the XML-in-LAML Mirror Generation Tool") (author (ast "span" ("Kurt Nørmark" #t " " #t (char-ref copy)) () double xhtml10-transitional ()) #t "normark@cs.aau.dk") (affiliation "Department of Computer Science," #t "Aalborg University," #t "Denmark.") (abstract . " This is the LAML tool that generates the language specific part of an XML mirror in Scheme. From version 20 of LAML, this tool is able to generate a fully validating mirror i Scheme of an XML language from a parsed XML DTD. <p> For validation purposes, this tool generates deterministic final state automata from the parsed content models, as delivered by the LAML XML DTD parser. These automata are embedded in the validation predicates which accompany the mirror functions in Scheme of the XML elements.<p> The generated mirrors rely heavily on the common part, which is shared for all XML-in-LAML languages. The common part is found in lib/xml-in-laml/xml-in-laml.scm, and a <a href=\"../../../lib/xml-in-laml/man/xml-in-laml.html\">XML-in-LAML common library manual</a> is available.<p> Let us denote the language by the symbol L.  As input this tool takes a parsed DTD, L.dtd, in the Lisp representation made by the LAML <a href=\"../../dtd-parser/man/dtd-parser.html\">DTD parser</a>. As output the LAML mirror generation tool makes a file L-mirror.scm in the mirror-target-dir.<p> The tool is typically driven by a LAML script  (such as <a href=\"../sample-mirror-generation/make-xhtml10-transitional-mirror.laml\"> the script for generation of XHTML 1.0 transitional</a>).<p> An easy way to use the mirror generation tool is via the procedure <a href=\"../../../man/laml.html#generate-xml-mirror\">generate-xml-mirror</a> in the fundamental LAML setup library, called laml.scm.<p> The main procedure in LAML mirror generation tool is generate-mirror (see below). As such, the tool can be identified with the generate-mirror procedure.<p> Please consult <a href = \"../../../tutorial/xml-in-laml/xml-in-laml.html\">\"XML mirrors in Scheme: XML in LAML\"</a> (section 3) for a tutorial introduction to the use of the tool.<p> From LAML version 26, attributes list corresponding to the same element name, are merged to a single attribute list. (This was prompted by the processing of XHTML 1.1). ") (scheme-source-file . "/user/normark/scheme/tools/xml-in-laml/xml-in-laml.scm/") (laml-resource . "true") (documentation-commenting-style . not-provided) (default-attribute-explanation . not-provided) (source-destination-delta . not-provided) (css-prestylesheet . "compact") (css-stylesheet . "argentina") (css-stylesheet-copying . "true") (make-dtd-manual-template . not-provided) (keep-syntactical-comment-file . not-provided) (manual-destination-name . not-provided) (mirror-names-defined . not-provided) (mirror-name-prefix . not-provided) (attribute-sorting . not-provided) (scheme-source-linking . not-provided)) ((kind "manual-section") (section-title "Tool parameters - configuration constants.") (section-body "Please notice that most of these constants must be passed as parameters to the procedure generate-mirror.")) ((kind "manual-page") (description "The name of the generated mirror - a string without initial path and without extension. Must be defined in the LAML script which parameterizes this tool. ") (title "mirror-name") (form mirror-name)) ((kind "manual-page") (description "The full path to the parsed DTD file (a lsp file). Must be defined in the LAML script which parameterizes this tool ") (title "parsed-dtd-path") (form parsed-dtd-path)) ((kind "manual-page") (description "The full path of the directory in which to put the mirror. Must be defined in the LAML script which parameterizes this tool ") (title "mirror-target-dir") (form mirror-target-dir)) ((kind "manual-page") (description "Is lib/xml-in-laml/xml-in-laml.scm loaded by the language specific mirror library? ") (title "auto-lib-loading") (form auto-lib-loading)) ((kind "manual-page") (description "The list of action elements (a list of symbols). The named mirror functions of action elements do not return an AST. The mirror function accessed throught the language map do, however, always return ASTs. Rather, they apply a procedure on the ast. If the element name is N, the action procedure name becomes N! ") (title "action-elements") (form action-elements)) ((kind "manual-page") (description "A boolean variable that controls how to pass action procedures to generate-xml-mirror-function. If #f, only pass a boolean value. If #t, pass the action procedure itself. #f is recommeded. The reason is that it allows us to load the mirror library and to define the action procedures in arbitrary order. If #t, the action procedures must be defined before the mirror library is loaded. If the value of this variable is #f, we pass #t to generate-xml-mirror-function if there is an action procedure of the element. It is then up to generate-xml-mirror-function to get the action procedure from the action procedure map (as made by make-xml-action-procedure-structure). ") (title "pass-action-procedure?") (form pass-action-procedure?)) ((kind "manual-page") (description "A boolean variable that controls the generation of name mirror functions. If true (#t) named mirror functions will be defined. If false (#f), the mirror functions are only available via the language map. ") (title "define-named-mirror-functions?") (form define-named-mirror-functions?)) ((kind "manual-page") (description "A string prepended to all names of function names. Defaults to the empty string (no mirror name prefix used). If you wish to have a '-' og ':' in between the prefix and the proper name, you should add it as the last character of the string bound to this variable. You can use the mirror name prefix to ensure that two or more mirrors of XML functions can coexist without name clashes. Notice that the use of language maps is an alternative way to handle name clashes. ") (title "mirror-name-prefix") (form mirror-name-prefix)) ((kind "manual-page") (description "Scheme names - a list of symbols. Think of these as reserved names in Scheme, which we do not want to redefine as mirror functions. ") (title "reserved-scheme-names") (form reserved-scheme-names)) ((kind "manual-section") (section-title "Default language properties.") (section-body "The default language properties are string-valued variables, which are intended to be set for each new mirror. The value of these variable are inserted into the generated mirror. This explains why all values must be strings. This may seem a little strange, but take a look in the beginning of one of the generated mirror files to see the effect. <p> Notice that lib/xml-in-laml/xml-in-laml.scm contains a number of configuration options too, together with a number of functions that access/mutate the properties given below. You should only set those that provide inappropriate defaults. It means that you typically only have to set of few of the variables in this section when you make a new mirror.")) ((kind "manual-page") (description "A boolean value which controls the default value of CDATA transliteration via the HTML/XML charater transformation table. The default value is true. The boolean value must be embedded in a string. This value can be changed after the mirror is generated. ") (title "default-xml-transliterate-character-data?") (form default-xml-transliterate-character-data?)) ((kind "manual-page") (description "The list of elements names (strings) for which the transliteration does not apply. The list value must be embedded in a string. The value of this variable is locked at mirror generation time. ") (title "default-xml-non-transliteration-elements") (form default-xml-non-transliteration-elements)) ((kind "manual-page") (description "The list of elements names (strings) for which all white space content characters must be rendered. Typically the HTML pre element. The list value must be embedded in a string. The value of this variable is locked at mirror generation time. ") (title "default-xml-preformatted-text-elements") (form default-xml-preformatted-text-elements)) ((kind "manual-page") (description "The default value of xml-char-transformation-table. The default value is is \"html-char-transformation-table\". The value must be a string. ") (title "default-xml-char-transformation-table") (form default-xml-char-transformation-table)) ((kind "manual-page") (description "Controls whether to explicitly pass the default dtd attributes in every instance of it. Normally #f, which is the default value. If #t, it will most likely collide with the attribute validation (only one instance of each attribute name is allowed). The boolean value must be embedded a string. The value of this variable is locked at mirror generation time. ") (title "default-pass-default-dtd-attributes?") (form default-pass-default-dtd-attributes?)) ((kind "manual-page") (description "Controls if only string valued attributes are accepted. The default value is true. The boolean value must be embedded in a string. ") (title "default-xml-accept-only-string-valued-attributes?") (form default-xml-accept-only-string-valued-attributes?)) ((kind "manual-page") (description "Controls if numbers and characters are accepted as 'extended' element contents items. Such items will be transformed to strings before further processing. The default value is false. The boolean value must be embedded in a string. ") (title "default-xml-accept-extended-contents?") (form default-xml-accept-extended-contents?)) ((kind "manual-page") (description "The default value of document-type-declaration. The value must be a string. The default default is the empty string with the meaning 'no attribute type declaration'. Thus, if you do not give the default-document-type-declaration there will be no document type declartion in your documents. The value of this variable is locked at mirror generation time. ") (title "default-document-type-declaration") (form default-document-type-declaration)) ((kind "manual-page") (description "Controls the presence of white space markers in the ast. The default value is true. The boolean value must be represented as a string. ") (title "default-xml-represent-white-space") (form default-xml-represent-white-space)) ((kind "manual-page") (description "Controls the handling of duplicated attributes in XML attribute lists. Possible values are keep-all, keep-first, and keep-last. keep-all: the attribute list is not affected at all; All attributes are passed. keep-first: only the first attribute name/value pair is passed for further processing. keep-last: only the last attribute name/value pair is passed for further processing. The default value is the symbol keep-all. The symbol value must be represented as a string. ") (title "default-xml-duplicated-attribute-handling") (form default-xml-duplicated-attribute-handling)) ((kind "manual-section") (section-title "The main tool procedure.") (section-body "The main tool procedure is generate-mirror. After setting the parameters call this procedure which will make the XML mirror.")) ((kind "manual-page") (parameters (parameter "parsed-dtd-path" "the full path to the parsed dtd (a lsp file).") (parameter "mirror-destination-path" "full path to the file on which to write the mirror.") (parameter "language-name" "the name of language which we mirror in LAML (a symbol).") (parameter "file-inclusion-path" "An absolute path to a text file, which will be included at the rear end of the generated mirror library. The setup of link checking is typically provided via such file inclusion.")) (cross-references (reference "About link checking in LAML" "Note" "../../../info/link-checking.html")) (description "The main tool procedure which makes the mirror of XML in LAML. The procedure writes a text file in mirror-destination-path. ") (form "(generate-mirror parsed-dtd-path mirror-destination-path language-name [file-inclusion-path])") (title "generate-mirror")) ((kind "manual-page") (parameters (parameter "element" "The parsed element structure, as produced by the LAML DTD parser.") (parameter "attribute" "The parsed attribute structure, as produced by the LAML DTD parser.") (parameter "language-name" "The name of the XML language, to which this mirror function belongs.")) (description "Construct and return a mirror function. ") (title "make-xml-mirror-function") (form (make-xml-mirror-function element attribute language-name))) ((kind "manual-page") (parameters (parameter "element" "The parsed element structure, as produced by the LAML DTD parser.") (parameter "attribute" "The parsed attribute structure, as produced by the LAML DTD parser.") (parameter "language-name" "The name of the XML language, to which this mirror function belongs.")) (description "Make and return a validation procedure. ") (title "make-xml-validation-procedure") (form (make-xml-validation-procedure element attribute language-name))))